!function(){function e(e,t,n,a){function o(e,t,n){return{request:function(e){e.withCredentials=!0,n.get("$http").defaults.headers.common.isAjax="true";var t=function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,a=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),i=(/(?:Chrome|CriOS)/.test(e),/(?:iPad|PlayBook)/.test(e)||a&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e)),r=/(?:iPhone)/.test(e)&&!i,l=!r&&!a&&!n;return{isTablet:i,isPhone:r,isAndroid:a,isPc:l}}();return(t.isAndroid||t.isPhone)&&(n.get("$http").defaults.headers.common.isMobile="true"),e},requestError:function(e){return e},response:function(e){return e},responseError:function(t){return e.when(t,function(e){t&&511===t.status&&(window.location.href=t.data.location)}),t}}}t.otherwise("/profile");var i=screen.width,r=document.body.clientWidth;i<1024||r<1024?t.otherwise("/home"):t.otherwise("/profile"),e.state("dashboard",{url:"/dashboard",templateUrl:"partials/dashboard/view.html",controller:"dashboardController",controllerAs:"dashboard"}).state("home",{url:"/home",templateUrl:"partials/home/view.html",controller:"homeController",controllerAs:"home"}).state("profile",{url:"/profile",templateUrl:"partials/profile/view.html",controller:"profileController",controllerAs:"profile"}).state("profile.index",{url:"/index/:proid",templateUrl:"partials/profile/index/view.html",controller:"indexController",controllerAs:"index"}).state("profile.menu",{url:"/menu/:proid",templateUrl:"partials/profile/menu/view.html",controller:"menuController",controllerAs:"menu"}).state("profile.eco",{url:"/eco/:proid",templateUrl:"partials/profile/eco/view.html",controller:"ecoController",controllerAs:"eco"}).state("profile.industry",{url:"/industry/:proid",templateUrl:"partials/profile/industry/view.html",controller:"industryController",controllerAs:"industry"}).state("profile.agri",{url:"/agri/:proid",templateUrl:"partials/profile/agri/view.html",controller:"agriController",controllerAs:"agri"}).state("profile.service",{url:"/service/:proid",templateUrl:"partials/profile/service/view.html",controller:"serviceController",controllerAs:"service"}).state("profile.travel",{url:"/travel/:proid",templateUrl:"partials/profile/travel/view.html",controller:"travelController",controllerAs:"travel"}).state("profile.spot",{url:"/spot/:proid",templateUrl:"partials/profile/spot/view.html",controller:"spotController",controllerAs:"spot"}).state("main",{url:"/main/:mid",templateUrl:"partials/main/view.html",controller:"mainController",controllerAs:"main"}).state("login",{url:"/login",templateUrl:"partials/login/view.html",controller:"loginController",controllerAs:"login"}).state("main.preview",{url:"/preview/:preid",templateUrl:"partials/preview/view.html",controller:"previewController",controllerAs:"preview"}).state("main.module",{url:"/module/:id",templateUrl:"partials/module/view.html",controller:"moduleController",controllerAs:"module"}).state("main.file",{url:"/file/:furl",templateUrl:"partials/file/view.html",controller:"fileController",controllerAs:"file"}).state("main.module.content",{url:"/content/:tid/:smname",templateUrl:"partials/module/content/view.html",controller:"contentController",controllerAs:"content"}).state("main.module.content.detail",{url:"/detail/:pid/:mname",templateUrl:"partials/module/content/detail/view.html",controller:"detailController",controllerAs:"detail"}).state("main.module.content.goalprogress",{url:"/goalprogress/:pid/:mname",templateUrl:"partials/module/content/goal_progress/view.html",controller:"goalprogressController",controllerAs:"goalprogress"}).state("main.module.content.goalquater",{url:"/goalquater/:pid/:mname",templateUrl:"partials/module/content/goal_quater/view.html",controller:"goalquaterController",controllerAs:"goalquater"}).state("main.module.content.goalyear",{url:"/goalyear/:pid/:mname",templateUrl:"partials/module/content/goal_year/view.html",controller:"goalyearController",controllerAs:"goalyear"}).state("main.module.content.proceeding",{url:"/proceeding/:pid/:mname",templateUrl:"partials/module/content/proceeding/view.html",controller:"proceedingController",controllerAs:"proceeding"}).state("main.module.content.ecocity",{url:"/ecocity/:pid/:mname",templateUrl:"partials/module/content/eco_city/view.html",controller:"ecocityController",controllerAs:"ecocity"}).state("main.module.content.ecocounty",{url:"/ecocounty/:pid/:mname",templateUrl:"partials/module/content/eco_county/view.html",controller:"ecocountyController",controllerAs:"ecocounty"}).state("main.module.content.ecogdp",{url:"/ecogdp/:pid/:mname",templateUrl:"partials/module/content/eco_gdp/view.html",controller:"ecogdpController",controllerAs:"ecogdp"}).state("main.module.content.projectcity",{url:"/projectcity/:pid/:mname",templateUrl:"partials/module/content/project_city/view.html",controller:"projectcityController",controllerAs:"projectcity"}).state("main.module.content.projectcounty",{url:"/projectcounty/:pid/:mname",templateUrl:"partials/module/content/project_county/view.html",controller:"projectcountyController",controllerAs:"projectcounty"}),n.interceptors.push(o),o.$inject=["$q","$location","$injector"]}angular.module("app",["ui.router","common.http","app.dashboard","app.login","app.main","app.home","app.profile","app.profile.index","app.profile.menu","app.profile.eco","app.profile.industry","app.profile.agri","app.profile.service","app.profile.travel","app.profile.spot","app.file","app.main.preview","app.main.module","app.main.module.content","app.main.module.content.detail","app.main.module.content.goalprogress","app.main.module.content.goalquater","app.main.module.content.goalyear","app.main.module.content.proceeding","app.main.module.content.ecocity","app.main.module.content.ecocounty","app.main.module.content.ecogdp","app.main.module.content.projectcity","app.main.module.content.projectcounty"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider"]}(),function(){var e=angular.module("common.http",[]);e.constant("URL",location.protocol+"//"+location.host+"/govDecisionServer"),e.factory("validate",[function(){return function(e,t){var n=function(t){return e&&e.head&&e.head.status===t};switch(t){case 200:return n(t);case 201:return n(t);case 202:return n(t);case 400:return n(t);case 404:return n(t);case 405:return n(t);case 415:return n(t);case 500:return n(t)}}}])}(),function(){var e=angular.module("app.dashboard",[]);e.$inject=["$location"],e.controller("dashboardController",["$scope","dashboardService","$state",function(e,t,n){var a=this;e.chartlist=[],t.getMenus({parentId:"0"}).then(function(e){a.menus=e.data,a.menus&&a.menus[0]&&a.menus[0].id&&n.go("profile")})}]),e.factory("dashboardService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,getEcoData:r}}])}(),function(){var e=angular.module("app.file",[]);e.controller("fileController",["$scope","fileService","$state","$stateParams","$uibModal","URL",function(e,t,n,a,o,i){function r(){t.getFileList(a.furl,{fileType:"pdf",offset:(l.Paging.currentPage-1)*l.Paging.itemsPerPage,limit:l.Paging.itemsPerPage}).then(function(e){l.fileList=e.data.data,l.Paging.totalItems=e.data.total})}var l=this;e.Modal={},l.Paging={},l.Paging.currentPage=1,l.Paging.maxSize=5,l.Paging.itemsPerPage=10,r(),l.showDetail=function(t,n){var a=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"fileDetail.html",scope:e,size:"lg"});e.file_url=i+t+"?id="+n,e.Modal.close=function(){a.close()}},l.Paging.pageChanged=function(){r()}}]),e.filter("trustUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),e.factory("fileService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}return{getMenus:n,getFileList:a}}])}(),function(){var e=angular.module("app.home",["cgBusy"]);e.$inject=["$location"],e.controller("homeController",["$scope","homeService","$state",function(e,t,n){var a=this;a.promise=t.getMenus({parentId:"0"}).then(function(e){a.menus=e.data,_.remove(a.menus,function(e){return"首页"==e.name||"经济概况"==e.name||"精准扶贫"==e.name||"经济形势分析"==e.name})})}]),e.factory("homeService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}return{getMenus:n}}])}(),function(){var e=angular.module("app.login",["ngCookies"]);e.controller("loginController",["$rootScope","$cookies","$scope","$state","loginService",function(e,t,n,a,o){sessionStorage.token&&sessionStorage.removeItem("token"),sessionStorage.message&&(n.alerts=[{type:"danger",msg:sessionStorage.message}],n.closeAlert=function(e){n.alerts.splice(e,1)},sessionStorage.removeItem("message")),n.Login={},n.Login.submit=function(i){if(console.log(i),n.loginSubmitted=!1,i){var r=n.Login.username,l=hex_md5(n.Login.password);o.login({username:r,password:l}).then(function(o){var i=o.data.body[0];e.User=i,t.put("User",JSON.stringify(i)),console.log(JSON.stringify(i));var r=o.data.head.token;r&&(sessionStorage.token=r),200==o.data.head.status?a.go("main.preview"):n.loginError=!0})}else n.loginSubmitted=!0}}]),e.factory("loginService",["$http","URL",function(e,t){function n(n){return e.post(t+"/login",{data:n})}return{login:n}}])}(),function(){var e=angular.module("app.main",[]);e.controller("mainController",["$scope","mainService","$state","$stateParams","$window",function(e,t,n,a,o){var i=this;i.showMenu=function(){$(".side-nav").toggleClass("sidebar-collapse"),$(".m-header").toggleClass("sidebar-collapse"),$(".mobile-content").toggleClass("sidebar-collapse")},i.hideMenu=function(){$(".side-nav").removeClass("sidebar-collapse"),$(".m-header").removeClass("sidebar-collapse"),$(".mobile-content").removeClass("sidebar-collapse")};var r=screen.width,l=screen.height,s=document.body.clientWidth;$(".mobile-content").height();e.showMobile=!1,(r<1024||s<1024)&&(e.showMobile=!0,$(".mobile-content").css({"min-height":l+"px"})),t.getMenus({parentId:"0"}).then(function(e){if(i.menus=e.data,r<1024||s<1024?_.remove(i.menus,function(e){return"首页"==e.name||"经济概况"==e.name||"精准扶贫"==e.name||"经济形势分析"==e.name}):_.remove(i.menus,function(e){return"首页"==e.name||"经济概况"==e.name||"精准扶贫"==e.name||"经济形势分析"==e.name}),r<1024||s<1024){var o=0;t.getSubMenus(i.menus).then(function(e){_.forEach(i.menus,function(t,n){t.subMenus=e[n],t.id==a.mid&&(o=n)})}).then(function(){n.go("main.module.content",{tid:i.menus[o].subMenus[0].id,smname:i.menus[o].subMenus[0].name})})}else n.go("main.module",{id:a.mid})}),setTimeout(function(){$("#menu").metisMenu()},500),angular.element(o).bind("resize",function(){var n=screen.width,a=document.body.clientWidth;if(n<1024||a<1024){e.showMobile=!0,$(".mobile-content").css({"min-height":l+"px"});t.getSubMenus(i.menus).then(function(e){_.forEach(i.menus,function(t,n){t.subMenus=e[n]})}).then(function(){setTimeout(function(){$("#menu").metisMenu()},500)})}else e.$applyAsync(function(){e.showMobile=!1})})}]),e.factory("mainService",["$http","URL","$q",function(e,t,n){function a(n){return e.get(t+"/main/menu",{params:n})}function o(a){var o=[];return angular.forEach(a,function(n){var a={parentId:n.id},i=e.get(t+"/main/menu",{params:a}).then(function(e){return e.data});o.push(i)}),n.all(o)}return{getMenus:a,getSubMenus:o}}])}(),function(){var e=angular.module("app.main.module",[]);e.controller("moduleController",["$scope","moduleService","$stateParams","$state",function(e,t,n,a){var o=this;t.getMenuTabs({parentId:n.id}).then(function(t){o.menuTabs=t.data,o.menuTabs&&o.menuTabs[0]&&o.menuTabs[0].id&&(e.current_menu=o.menuTabs[0].name,a.go("main.module.content",{tid:o.menuTabs[0].id,smname:o.menuTabs[0].name}))}),o.toggleSecMenus=function(e){e.stopPropagation(),$(".menu-label").toggleClass("m-collapse")}}]),e.factory("moduleService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}return{getMenuTabs:n}}])}(),function(){var e=angular.module("app.main.preview",["ui.bootstrap"]);e.controller("previewController",["$scope","previewService","$stateParams","$state",function(e,t,n,a){var o=this;e.chartlist=[],t.getContent({menuId:n.preid}).then(function(t){o.content=_.sortBy(t.data,["picCode"]),_.forEach(o.content,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.chartlist.push(n)})}),t.getEcoData({picCode:7117}).then(function(e){o.ecoData=e.data}),t.getEcoData({picCode:7118}).then(function(e){o.ecoDataDown=e.data}),e.open=function(t){e.chartlist[t].opened=!0},e.changed=function(t){if(!angular.isDate(e.chartlist[t].model)||isNaN(e.chartlist[t].model.getTime()))return void alert("请输入正确的日期格式！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("previewService",["$http","URL",function(e,t){function n(n,a){return e.get(t+n,{params:a})}function a(n){return e.get(t+"/main/showPics",{params:n})}function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function i(n){return e.get(t+"/identity/table",{params:n})}return{getDetail:n,getContent:a,getDateFormat:o,getEcoData:i}}]),e.directive("wiservChartEtotal",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{econtent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.econtent&&n.econtent.url&&e.getDetail(n.econtent.url,{queryTime:e.getDateFormat(n.econtent.model,n.econtent.format),picCode:n.econtent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.econtent.model||""==o.init_query_time||(n.econtent.model=new Date(o.init_query_time)),n.econtent.query_time=o.init_query_time;var r={};r.formatYear="yyyy","year"==o.time_scope&&(n.econtent.format="yyyy",r.minMode="year",r.datepickerMode="year"),"month"==o.time_scope&&(n.econtent.format="yyyy-MM",r.minMode="month",r.datepickerMode="month"),n.econtent.dateOptions=r,n.econtent.dep_name=o.dep_name;var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+o.y_name[0]+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:o.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+o.y_name[0]},textStyle:{color:"#333"}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#FFF"}},data:o.series[0].data},{name:o.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"\n";else t=e.data.name+":"+e.data.value+"\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}}},radius:["25%","50%"],data:o.series[1].data}]},c=screen.width;c<1600&&(s.series[1].labelLine={normal:{length:6,length2:4}}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(s)},400),n.onResize1=function(){i&&i.resize()},angular.element(t).bind("resize",function(){n.onResize1()})}})}}}]),e.directive("wiservChartIncrease",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{icontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.icontent&&n.icontent.url&&e.getDetail(n.icontent.url,{queryTime:e.getDateFormat(n.icontent.model,n.icontent.format),picCode:n.icontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.icontent.query_time=o.init_query_time,n.icontent.dep_name=o.dep_name;var r=["rgb(0,204,200)","rgb(232,175,64)","rgb(0,168,228)"],l={color:r,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+e.data.unit+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:o.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return"\n"+e.data.name+"\n"+e.data.value+e.data.unit+"\n"},textStyle:{color:"#333"}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#FFF"}},data:o.series[0].data},{name:o.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+"\n"+e.data.other[n].value+e.data.other[n].unit+"\n";else t=e.data.name+"\n"+e.data.value+e.data.unit+"\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}}},radius:["25%","50%"],data:o.series[1].data}]},s=screen.width;s<1600&&(l.series[1].labelLine={normal:{length:10,length2:8}}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(l)},400),n.onResize2=function(){i&&i.resize()},angular.element(t).bind("resize",function(){n.onResize2()})}})}}}]),e.directive("wiservChartInvest",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{vcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.vcontent&&n.vcontent.url&&e.getDetail(n.vcontent.url,{queryTime:e.getDateFormat(n.vcontent.model,n.vcontent.format),picCode:n.vcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.vcontent.query_time=o.init_query_time,n.vcontent.dep_name=o.dep_name;var r={},l={};o.dataItems&&o.dataItems[0]&&(r=o.dataItems[0]),o.dataItems&&o.dataItems[1]&&(l=o.dataItems[1]);var s=["rgb(232, 215, 64)","rgb(154, 253, 138)","rgb(14, 83, 108)"],c=["rgb(0,168,228)","rgb(0,152,72)","rgba(14, 83, 108, 0.5)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.scale=!0,n.type="value",n.name=e,n.axisLabel={textStyle:{color:"#333"}},n.axisTick={},n.axisTick.inside=!0,n.splitLine={show:!0,interval:"auto"},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),e.label={normal:{show:!0,position:"top",textStyle:{color:"#333"}}}});var m=screen.width,u=0,d="24%",p="10%";m<1600&&(u="auto",d="32%",p="16%");var f={color:c,title:{text:r.name+"："+r.value+r.unit,subtext:l.name+"："+l.value+l.unit,textStyle:{fontSize:12,color:"#333"},subtextStyle:{fontSize:12,color:"#333",fontWeight:"border"},itemGap:10,padding:4,borderColor:"#DDD",borderWidth:1},grid:{top:d,left:p,right:p,bottom:30},legend:{orient:"vertical",left:"right",data:o.legend,textStyle:{color:"#333",fontSize:14}},tooltip:{trigger:"axis"},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:s[2]}},axisLabel:{interval:u,textStyle:{fontSize:8,color:"#333"}},splitLine:{show:!0,interval:"auto",lineStyle:{color:s[3]}},splitArea:{show:!0,areaStyle:{color:s[4]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(f)},400),n.onResize3=function(){i&&i.resize()},angular.element(t).bind("resize",function(){n.onResize3()})}})}}}]),e.directive("wiservChartCpi",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{ccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.ccontent&&n.ccontent.url&&e.getDetail(n.ccontent.url,{queryTime:e.getDateFormat(n.ccontent.model,n.ccontent.format),picCode:n.ccontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.ccontent.dep_name=o.dep_name,n.ccontent.query_time=o.init_query_time;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c=0,m="24%",u="10%";s<1600&&(c="auto",m="32%",u="16%");var d=["rgb(255,169,34)","rgb(0,152,72)","rgb(0,168,228)"],p={color:d,tooltip:{trigger:"axis"},legend:{orient:"vertical",left:"right",data:o.legend,textStyle:{color:"#333",fontSize:14}},grid:{top:m,left:u,bottom:30},xAxis:{type:"category",boundaryGap:!1,data:o.x_data,axisLabel:{interval:0,textStyle:{fontSize:8},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}}},yAxis:{type:"value",name:o.y_name,min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLabel:{formatter:"{value}"}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(p)},400),n.onResize4=function(){i&&i.resize()},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("wiservChartConsume",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{scontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.scontent&&n.scontent.url&&e.getDetail(n.scontent.url,{queryTime:e.getDateFormat(n.scontent.model,n.scontent.format),picCode:n.scontent.picCode}).then(function(e){var o=e.data;if(n.scontent.query_time=o.init_query_time,n.scontent.dep_name=o.dep_name,o&&o.series){var r={},l={};o.dataItems&&o.dataItems[0]&&(r=o.dataItems[0]),o.dataItems&&o.dataItems[1]&&(l=o.dataItems[1]);var s=["rgb(107,217,95)","rgb(0,168,228)"],c={color:s,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+"<br/>";else t=e.data.name+":"+e.data.value+o.y_name[0]+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},title:{text:r.name+"："+r.value+r.unit,subtext:l.name+"："+l.value+l.unit,left:"right",textStyle:{fontSize:12},subtextStyle:{fontSize:12,color:"#333",fontWeight:"border"},itemGap:10,padding:4,borderColor:"#DDD",borderWidth:1},series:[{name:o.series[0].name,type:"pie",radius:"55%",center:["50%","50%"],startAngle:120,data:o.series[0].data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{normal:{label:{show:!0,formatter:function(e){var t="";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+"\n";else{var a=o.y_name[0]?o.y_name[0]:"";t=e.data.name+":"+e.data.value+a+"\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%")}return t}}}},labelLine:{show:!0,normal:{length:14,length2:8}}}]};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(c)},400),n.onResize5=function(){i&&i.resize()},angular.element(t).bind("resize",function(){n.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile",[]);e.$inject=["$location"],e.controller("profileController",["$scope","profileService","$state","$stateParams","$rootScope",function(e,t,n,a,o){var i=this;o.showMenu=!0,t.getMenus({parentId:"0"}).then(function(e){i.menus=e.data,i.cMenu=i.menus[1],o.currentMenu=i.cMenu.id,_.forEach(i.menus,function(e){var t=e.name;switch(t){case"首页":e.profile_sref="profile.index";break;case"经济概况":e.profile_sref="profile.menu";break;case"经济详情":e.profile_sref="profile.eco";break;case"经济形势分析":e.profile_sref="profile.spot";break;case"工业管理":e.profile_sref="profile.industry";break;case"农业管理":e.profile_sref="profile.agri";break;case"服务业管理":e.profile_sref="profile.service";break;case"旅游业管理":e.profile_sref="profile.travel"}}),_.remove(i.menus,function(e){return"精准扶贫"==e.name||"目标工作分析"==e.name}),i.menus&&i.menus[0]&&i.menus[0].id&&($(".profile").css({background:"url(assets/images/bg_profile.png)"}),n.go("profile.index",{proid:i.menus[0].id}))}),i.currentMenu=function(e){"3"==e.type?i.cMenu=i.menus[1]:i.cMenu=e}}]),e.factory("profileService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}return{getMenus:n}}])}(),function(){var e=angular.module("app.main.module.content",[]);e.controller("contentController",["$scope","contentService","$stateParams","$state","$rootScope",function(e,t,n,a,o){var i=this;o.smname=n.smname,t.getSubMenus({parentId:n.tid}).then(function(e){i.subMenus=e.data,i.subMenus&&i.subMenus[0]&&i.subMenus[0].id&&($(".side-nav").removeClass("sidebar-collapse"),$(".m-header").removeClass("sidebar-collapse"),$(".mobile-content").removeClass("sidebar-collapse"),"4"==i.subMenus[0].type?(i.flag=!0,_.forEach(i.subMenus,function(e){var t=e.name;switch(t){case"目标任务进度分析":e.content_sref="main.module.content.goalprogress";break;case"季度考核结果分析":e.content_sref="main.module.content.goalquater";break;case"年度考核结果分析":e.content_sref="main.module.content.goalyear";break;case"事项督办":e.content_sref="main.module.content.proceeding";break;case"全市主要经济指标进度":e.content_sref="main.module.content.ecocity";break;case"县区主要经济指标进度":e.content_sref="main.module.content.ecocounty";break;case"全市GDP支撑指标进度":e.content_sref="main.module.content.ecogdp";break;case"全市进度":e.content_sref="main.module.content.projectcity";break;case"区县进度":e.content_sref="main.module.content.projectcounty"}}),a.go(i.subMenus[0].content_sref,{pid:i.subMenus[0].id,mname:i.subMenus[0].name})):(a.go("main.module.content.detail",{pid:i.subMenus[0].id,mname:i.subMenus[0].name}),i.flag=!1))})}]),e.factory("contentService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}return{getSubMenus:n}}])}(),function(){var e=angular.module("app.profile.agri",[]);e.$inject=["$location"],e.controller("agriController",["$scope","agriService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){var r=this;i.showMenu=!0,$(".profile").css({background:"url(assets/images/bg.png)"}),e.agrilist=[];var l=a.proid;i.currentMenu=l,t.getContent({menuId:l}).then(function(t){r.agricontent=_.sortBy(t.data,["picCode"]),_.forEach(r.agricontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.agrilist.push(n)})})}]),e.factory("agriService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,getagriData:r}}]),e.directive("agriChartRes",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{rescontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.rescontent&&n.rescontent.url&&e.getDetail(n.rescontent.url,{picCode:n.rescontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.rescontent.query_time=o.init_query_time,n.rescontent.dep_name=o.dep_name,n.rescontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="8%";s<1600&&(c="32%",m="10%");var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisTick={},n.axisTick.inside=!0,o.max_and_min&&o.max_and_min[t]){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,n.axisLine={onZero:!1,lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},n.axisLabel={},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisLabel.textStyle={color:u[5]},n.nameTextStyle={color:u[5]},n.splitLine={show:!0,interval:"auto",lineStyle:{color:u[3]}},n.splitArea={show:!0,areaStyle:{color:u[4]}},o.yAxis.push(n)}),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="bottom";(t+1)%2!=0&&(n="top"),e.label={normal:{show:!0,position:n}}});var d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:m,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("agriChartDistrict",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{districtcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.districtcontent&&n.districtcontent.url&&e.getDetail(n.districtcontent.url,{picCode:n.districtcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.districtcontent.query_time=o.init_query_time,n.districtcontent.dep_name=o.dep_name,n.districtcontent.title=o.title;var r=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;o.max_and_min&&(l=Math.round(o.max_and_min[0].minValue),s=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:r[5]},n.axisLabel={textStyle:{color:r[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:r[2]}},n.splitArea={show:!0,areaStyle:{color:r[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:r,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:"6%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:r[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:r[2]}},splitArea:{show:!0,areaStyle:{color:r[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize2=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize2()})}})}}}]),e.directive("agriChartFarm",["agriService","$window",function(e,t){
return{restrict:"ACE",scope:{farmcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.farmcontent&&n.farmcontent.url&&e.getDetail(n.farmcontent.url,{picCode:n.farmcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.farmcontent.query_time=o.init_query_time,n.farmcontent.dep_name=o.dep_name,n.farmcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:s[5]},n.axisLabel={textStyle:{color:s[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},n.splitArea={show:!0,areaStyle:{color:s[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize3=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize3()})}})}}}]),e.directive("agriChartTea",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{teacontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.teacontent&&n.teacontent.url&&e.getDetail(n.teacontent.url,{picCode:n.teacontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.teacontent.query_time=o.init_query_time,n.teacontent.dep_name=o.dep_name,n.teacontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:s[5]},n.axisLabel={textStyle:{color:s[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},n.splitArea={show:!0,areaStyle:{color:s[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize3=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize3()})}})}}}]),e.directive("agriChartWalnut",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{walnutcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.walnutcontent&&n.walnutcontent.url&&e.getDetail(n.walnutcontent.url,{picCode:n.walnutcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.walnutcontent.query_time=o.init_query_time,n.walnutcontent.dep_name=o.dep_name,n.walnutcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:s[5]},n.axisLabel={textStyle:{color:s[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},n.splitArea={show:!0,areaStyle:{color:s[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("agriChartFish",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{fishcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.fishcontent&&n.fishcontent.url&&e.getDetail(n.fishcontent.url,{picCode:n.fishcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.fishcontent.model||""==o.init_query_time||(n.fishcontent.model=new Date(o.init_query_time)),n.fishcontent.query_time=o.init_query_time,n.fishcontent.dep_name=o.dep_name,n.fishcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:s[5]},n.axisLabel={textStyle:{color:s[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},n.splitArea={show:!0,areaStyle:{color:s[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:u,bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize5=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile.eco",[]);e.$inject=["$location"],e.controller("ecoController",["$scope","ecoService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){var r=this;i.showMenu=!0,$(".profile").css({background:"url(assets/images/bg.png)"}),e.chartlist=[];var l=a.proid;i.currentMenu=l,t.getContent({menuId:l}).then(function(t){r.dashcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.dashcontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.chartlist.push(n)})}),t.getEcoData({picCode:7117}).then(function(e){r.ecoData=e.data}),t.getEcoData({picCode:7118}).then(function(e){r.ecoDataDown=e.data,console.log(r.ecoDataDown),console.log($(".datalist")),$(".datalist").mCustomScrollbar()}),e.open=function(t){e.chartlist[t].opened=!0},e.changed=function(t){if(!angular.isDate(e.chartlist[t].model)||isNaN(e.chartlist[t].model.getTime()))return void alert("请输入正确的日期格式！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("ecoService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,getEcoData:r}}]),e.directive("dashChartEtotal",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{econtent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.econtent&&n.econtent.url&&e.getDetail(n.econtent.url,{queryTime:e.getDateFormat(n.econtent.model,n.econtent.format),picCode:n.econtent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.econtent.model||""==o.init_query_time||(n.econtent.model=new Date(o.init_query_time)),n.econtent.title=o.title,n.econtent.query_time=o.init_query_time,n.econtent.dep_name=o.dep_name;var r={};r.formatYear="yyyy","year"==o.time_scope&&(n.econtent.format="yyyy",r.minMode="year",r.datepickerMode="year"),"month"==o.time_scope&&(n.econtent.format="yyyy-MM",r.minMode="month",r.datepickerMode="month"),n.econtent.dateOptions=r,_.forEach(o.series[1].data,function(e){});var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+o.y_name[0]+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:o.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+o.y_name[0]},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:o.series[0].data},{name:o.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=n==e.data.other.length-1?e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit:e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"\n\n";else t=e.data.name+":"+e.data.value+"\n\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:o.series[1].data}]},c=screen.width;c<1600&&(s.series[1].labelLine={normal:{length:14,length2:8}},s.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},s.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(s)},0),n.onResize1=function(){i&&(i.clear(),i.resize(),i.setOption(s))},angular.element(t).bind("resize",function(){n.onResize1()})}})}}}]),e.directive("dashChartIncrease",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{icontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.icontent&&n.icontent.url&&e.getDetail(n.icontent.url,{queryTime:e.getDateFormat(n.icontent.model,n.icontent.format),picCode:n.icontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.icontent.title=o.title,n.icontent.query_time=o.init_query_time,n.icontent.dep_name=o.dep_name;var r=["rgb(0,204,200)","rgb(232,175,64)","rgb(0,168,228)"],l={color:r,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+e.data.unit+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:o.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return"\n"+e.data.name+"\n"+e.data.value+e.data.unit+"\n"},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:o.series[0].data},{name:o.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+"\n\n"+e.data.other[n].value+e.data.other[n].unit+"\n\n";else t=e.data.name+"\n\n"+e.data.value+e.data.unit+"\n\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:o.series[1].data}]},s=screen.width;s<1600&&(l.series[1].labelLine={normal:{length:10,length2:8}},l.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},l.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(l)},0),n.onResize2=function(){i&&(i.clear(),i.resize(),i.setOption(l))},angular.element(t).bind("resize",function(){n.onResize2()})}})}}}]),e.directive("dashChartInvest",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{vcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.vcontent&&n.vcontent.url&&e.getDetail(n.vcontent.url,{queryTime:e.getDateFormat(n.vcontent.model,n.vcontent.format),picCode:n.vcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.vcontent.query_time=o.init_query_time,n.vcontent.dep_name=o.dep_name,n.vcontent.title=o.title;var r={},l={};o.dataItems&&o.dataItems[0]&&(r=o.dataItems[0]),o.dataItems&&o.dataItems[1]&&(l=o.dataItems[1]);var s=["rgb(255,169,34)","rgb(0,152,72)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)"],c=["rgb(0,168,228)","rgb(107,217,95)","rgba(14, 83, 108, 0.5)","rgba(0,204,200,0.5)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisLabel={textStyle:{color:"rgb(0,168,228)"}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:s[2],shadowColor:s[2],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:s[3]}},n.splitArea={show:!0,areaStyle:{color:s[4]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),e.label={normal:{show:!0,position:"top",textStyle:{color:"#FFF"}}}});var m=screen.width,u="24%",d="10%";m<1600&&(u="40%",d="10%");var p={color:c,title:{text:r.name+"："+r.value+r.unit,subtext:l.name+"："+l.value+l.unit,textStyle:{fontSize:12,color:"rgb(200,254,200)"},subtextStyle:{fontSize:12,color:"rgb(200,254,200)",fontWeight:"border"},itemGap:10,padding:4,backgroundColor:"rgba(0, 120, 215, 0.5)"},grid:{top:u,left:d,right:"8%",bottom:30},legend:{orient:"vertical",left:"right",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12}},tooltip:{trigger:"axis"},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:s[2],shadowColor:s[2],shadowBlur:4}},axisLabel:{interval:0,textStyle:{fontSize:12,color:"rgb(0,168,228)"}},splitLine:{show:!0,interval:"auto",lineStyle:{color:s[3]}},splitArea:{show:!0,areaStyle:{color:s[4]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(p)},0),n.onResize3=function(){i&&(i.clear(),i.resize(),i.setOption(p))},angular.element(t).bind("resize",function(){n.onResize3()})}})}}}]),e.directive("dashChartCpi",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{ccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.ccontent&&n.ccontent.url&&e.getDetail(n.ccontent.url,{queryTime:e.getDateFormat(n.ccontent.model,n.ccontent.format),picCode:n.ccontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.ccontent.query_time=o.init_query_time,n.ccontent.dep_name=o.dep_name,n.ccontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="20%",m="10%"),_.forEach(o.series,function(e,t){"bar"==e.type&&(e.barMaxWidth="20%");var n="top";0==t&&(n="bottom"),e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)"],d={color:u,tooltip:{trigger:"axis"},legend:{orient:"vertical",left:"right",data:o.legend,textStyle:{color:"#d5e2df",fontSize:12}},grid:{top:"24%",left:m,right:"3%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:o.x_data,axisLine:{lineStyle:{color:u[2],shadowColor:u[2],shadowBlur:4}},axisLabel:{interval:0,textStyle:{fontSize:12},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e}},name:o.y_name,min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[2],shadowColor:u[2],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},0),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("dashChartConsume",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{scontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.scontent&&n.scontent.url&&e.getDetail(n.scontent.url,{queryTime:e.getDateFormat(n.scontent.model,n.scontent.format),picCode:n.scontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.scontent.query_time=o.init_query_time,n.scontent.dep_name=o.dep_name,n.scontent.title=o.title;var r={},l={};o.dataItems&&o.dataItems[0]&&(r=o.dataItems[0]),o.dataItems&&o.dataItems[1]&&(l=o.dataItems[1]);var s=["rgb(107,217,95)","rgb(0,168,228)","rgb(14, 83, 108)","rgb(0,204,200)"],c={color:s,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+"<br/>";else t=e.data.name+":"+e.data.value+o.y_name[0]+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},grid:{bottom:10},title:{text:r.name+"："+r.value+r.unit,subtext:l.name+"："+l.value+l.unit,left:"right",textStyle:{fontSize:12,color:"rgb(200,254,200)"},subtextStyle:{fontSize:12,color:"rgb(200,254,200)",fontWeight:"border"},itemGap:10,padding:4,backgroundColor:"rgba(0, 120, 215, 0.5)"},series:[{name:o.series[0].name,type:"pie",radius:"50%",center:["50%","50%"],startAngle:-230,data:o.series[0].data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{normal:{label:{show:!0,formatter:function(e){var t="\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=n==e.data.other.length-1?e.data.other[n].name+":"+e.data.other[n].value:e.data.other[n].name+":"+e.data.other[n].value+"\n\n";else{var a=o.y_name[0]?o.y_name[0]:"";t=e.data.name+":"+e.data.value+a+"\n\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%")}return t},textStyle:{color:"#FFF",fontSize:14}}}},labelLine:{show:!0,normal:{length:14,length2:8}}}]},m=screen.width;m<1600&&(c.series[0].labelLine={normal:{length:12,length2:4}},c.series[0].label={},c.series[0].label.normal={},c.series[0].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(c)},0),n.onResize5=function(){i&&(i.clear(),i.resize(),i.setOption(c))},angular.element(t).bind("resize",function(){n.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile.index",[]);e.$inject=["$location"],e.controller("indexController",["$scope","indexService","$stateParams","$rootScope","$window","$filter",function(e,t,n,a,o,i){$(".profile").css({background:"url(assets/images/bg_profile.png)"});var r=$(".inner-line").height(),l=$(".header").outerHeight(!0);$(".main").css({"max-height":r-l+"px"});var s=n.proid;a.showMenu=!1,a.currentMenu="",t.getContent({menuId:s}).then(function(n){var a=n.data;a&&a[0]&&t.getDetail(a[0].url,{picCode:a[0].picCode}).then(function(n){var a=n.data.series;e.allDatas=[],_.forEach(a,function(n){var a={};a.qxname=n.name,a.data=[];var o=n.data;_.forEach(o,function(e){var n={};if(n.item=[],_.map(a.data,"title").indexOf(e.name)>-1)_.forEach(a.data,function(t,n){t.title==e.name&&a.data[n].item.push(e)});else{if(n.title=e.name,n.dep_name=e.dep_name,e.init_query_time&&""!=e.init_query_time){var o=new Date(e.init_query_time.replace(" ","T"));n.model=t.getDateFormat(o,"M月")}else n.model="";console.log(n.model),n.item.push(e),a.data.push(n)}}),e.allDatas.push(a)}),e.qxdata=e.allDatas[0]}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}),angular.element(o).bind("resize",function(){var e=$(".inner-line").height(),t=$(".header").outerHeight(!0);$(".main").css({"max-height":e-t+"px"})})}]),e.factory("indexService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}return{getContent:n,getDetail:a,getDateFormat:o}}])}(),function(){var e=angular.module("app.profile.industry",[]);e.$inject=["$location"],e.controller("industryController",["$scope","industryService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){var r=this;i.showMenu=!0,$(".profile").css({background:"url(assets/images/bg.png)"}),e.indstlist=[];var l=a.proid;i.currentMenu=l,t.getContent({menuId:l}).then(function(t){r.indstcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.indstcontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.indstlist.push(n)})}),t.getindustryData({picCode:2003}).then(function(e){r.industryData=e.data,$(".datalist").mCustomScrollbar()})}]),e.factory("industryService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,getindustryData:r}}]),e.directive("indstChartReg",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{regcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.regcontent&&n.regcontent.url&&e.getDetail(n.regcontent.url,{picCode:n.regcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.regcontent.model||""==o.init_query_time||(n.regcontent.model=new Date(o.init_query_time)),n.regcontent.query_time=o.init_query_time,n.regcontent.dep_name=o.dep_name,n.regcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="12%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:15,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize1=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize1()})}})}}}]),e.directive("indstChartInvest",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{invstcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.invstcontent&&n.invstcontent.url&&e.getDetail(n.invstcontent.url,{picCode:n.invstcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.invstcontent.model||""==o.init_query_time||(n.invstcontent.model=new Date(o.init_query_time)),n.invstcontent.query_time=o.init_query_time,n.invstcontent.dep_name=o.dep_name,n.invstcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="12%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize2=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize2()})}})}}}]),e.directive("indstChartEco",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{ecocontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.ecocontent&&n.ecocontent.url&&e.getDetail(n.ecocontent.url,{picCode:n.ecocontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.ecocontent.model||""==o.init_query_time||(n.ecocontent.model=new Date(o.init_query_time)),n.ecocontent.query_time=o.init_query_time,n.ecocontent.dep_name=o.dep_name,n.ecocontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%",u="80%";s<1600&&(c="32%",m="16%",u="60%");var d=[];_.forEach(o.x_data,function(e,t){var n={};n.name=e,n.name.show=!0;var a=0,i=0;if(1==o.series[0].data.length){var r=_.map(o.series[0].data,"value")[0];a=Number(r[t]),i=Number(r[t]),_.forEach(r[0],function(e,t){Number(r[t])>a&&(a=Number(r[t])),Number(r[t])<i&&(i=Number(r[t]))})}else{var r=_.map(o.series[0].data,"value"),l=[];
_.forEach(r,function(e,t){l=_.concat(e,l)}),a=Number(l[0]),i=Number(l[0]),_.forEach(l,function(e){Number(e)>a&&(a=Number(e)),Number(e)<i&&(i=Number(e))})}n.max=a,n.min=.8*i,d.push(n)}),_.forEach(o.series,function(e){e.symbol="diamond",e.symbolSize=0,e.itemStyle={normal:{color:"rgb(236,206,15)"}},e.lineStyle={normal:{color:"rgb(236,206,15)"}},e.data[0].areaStyle={normal:{opacity:.8,color:"rgb(173,168,70)"}}});var p={};p.tooltip={},p.legend={left:"right",data:o.legend,textStyle:{color:"rgb(236,206,15)"},itemWidth:15,itemHeight:6},p.radar={},p.radar.center=["50%","50%"],p.radar.name={show:!0,textStyle:{color:"rgb(0,255,246)",fontSize:12},formatter:function(e){var t=e.length,n="";if(t>4){var a="",o="";if(a=e.substring(0,t-5),a.length>8){var i=a.substring(0,a.length-5),r=a.substring(a.length-5);a=i+"\n"+r}o=e.substring(t-5),n=a+"\n"+o}else n=e;return n}},p.radar.nameGap=8,p.radar.radius=u,p.radar.axisLine={show:!1},p.radar.splitLine={lineStyle:{color:"rgb(01,106,224)"}},p.radar.splitArea={show:!1},p.radar.indicator=d,p.series=o.series,setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(p)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(p))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("indstChartPro",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{procontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.procontent&&n.procontent.url&&e.getDetail(n.procontent.url,{picCode:n.procontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.procontent.model||""==o.init_query_time||(n.procontent.model=new Date(o.init_query_time)),n.procontent.query_time=o.init_query_time,n.procontent.dep_name=o.dep_name,n.procontent.title=o.title;var r=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;o.max_and_min&&(l=Math.round(o.max_and_min[0].minValue),s=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:r[5]},n.axisLabel={textStyle:{color:r[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:r[2]}},n.splitArea={show:!0,areaStyle:{color:r[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="45%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!1,position:"top"}}});var c=screen.width,m=60,u="10%";c<1600&&(m="16%",u="12%");var d={color:r,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{top:m,left:u,right:"2%",bottom:100},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},axisLabel:{interval:0,margin:8,textStyle:{fontSize:12,color:r[5]},formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!0,interval:0,lineStyle:{color:r[2]}},splitArea:{show:!0,areaStyle:{color:r[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("indstChartElec",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{eleccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.eleccontent&&n.eleccontent.url&&e.getDetail(n.eleccontent.url,{picCode:n.eleccontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.eleccontent.model||""==o.init_query_time||(n.eleccontent.model=new Date(o.init_query_time)),n.eleccontent.query_time=o.init_query_time,n.eleccontent.dep_name=o.dep_name,n.eleccontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c=60,m="10%";s<1600&&(c="16%",m="12%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}])}(),function(){var e=angular.module("app.profile.menu",[]);e.$inject=["$location"],e.controller("menuController",["$scope","menuService","$stateParams","$rootScope",function(e,t,n,a){a.showMenu=!0,$(".profile").css({background:"url(assets/images/bg_profile.png)"});var o=n.proid;a.currentMenu="",t.getContent({menuId:o}).then(function(n){var a=n.data;a&&a[0]&&t.getDetail(a[0].url,{picCode:a[0].picCode}).then(function(n){var a=n.data.series;e.allDatas=[],_.forEach(a,function(n){var a={};a.qxname=n.name,a.data=[];var o=n.data;_.forEach(o,function(e){var n={};if(n.item=[],_.map(a.data,"title").indexOf(e.name)>-1)_.forEach(a.data,function(t,n){t.title==e.name&&a.data[n].item.push(e)});else{if(n.title=e.name,n.dep_name=e.dep_name,e.init_query_time&&""!=e.init_query_time){var o=new Date(e.init_query_time.replace(" ","T"));n.model=t.getDateFormat(o,"M月")}else n.model="";n.item.push(e),a.data.push(n)}}),e.allDatas.push(a)}),e.qxdata=e.allDatas[0],console.log(e.allDatas)})}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("menuService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}return{getContent:n,getDetail:a,getDateFormat:o}}]),e.directive("wiservChartMap",["menuService","$window",function(e,t){return{restrict:"ACE",scope:{content:"=",all:"="},template:"<div id='bzmap' style='width:100%;height:100%'></div>",link:function(e,n,a){var o={};e.$applyAsync(function(){o=echarts.init(document.getElementById("bzmap")),setTimeout(function(){o.clear(),o.resize(),o.setOption({legend:{orient:"vertical",left:"left"},series:[{name:"巴中市经济概况",type:"map",map:"bz",left:10,top:20,right:10,bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"#FFF",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid"}},markPoint:{symbol:"pin",symbolSize:50},data:[{name:"通江县",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(18,126,215)"},{offset:1,color:"rgb(17,80,201)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"南江县",value:223,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(18,126,215)"},{offset:1,color:"rgb(17,80,201)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"巴州区",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,162,226)"},{offset:1,color:"rgb(18,132,217)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"平昌县",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,164,227)"},{offset:1,color:"rgb(18,112,210)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"恩阳区",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,175,230)"},{offset:1,color:"rgb(19,164,227)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}}]}]}),$("#bzmap").css({"background-image":"url(assets/images/map_bg.png)"})},500),o.on("mapselectchanged",function(t){var n=t.name;_.forEach(e.all,function(t){n&&n==t.qxname&&(e.content=t,e.$apply(function(){e.content=t}))})})}),e.onResize=function(){o&&o.resize()},angular.element(t).bind("resize",function(){e.onResize()}),angular.element(t).bind("resize",function(){e.onResize()})}}}])}(),function(){var e=angular.module("app.profile.service",[]);e.$inject=["$location"],e.controller("serviceController",["$scope","serviceService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){var r=this;i.showMenu=!0,$(".profile").css({background:"url(assets/images/bg.png)"}),e.servicelist=[];var l=a.proid;i.currentMenu=l,t.getContent({menuId:l}).then(function(t){r.servicecontent=_.sortBy(t.data,["picCode"]),_.forEach(r.servicecontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.servicelist.push(n)})})}]),e.factory("serviceService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,getserviceData:r}}]),e.directive("serviceChartConsume",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{consumecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.consumecontent&&n.consumecontent.url&&e.getDetail(n.consumecontent.url,{picCode:n.consumecontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.consumecontent.query_time=o.init_query_time,n.consumecontent.dep_name=o.dep_name,n.consumecontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="10%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("serviceChartBank",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{bankcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.bankcontent&&n.bankcontent.url&&e.getDetail(n.bankcontent.url,{picCode:n.bankcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.bankcontent.query_time=o.init_query_time,n.bankcontent.dep_name=o.dep_name,n.bankcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="16%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("serviceChartHouse",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{housecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.housecontent&&n.housecontent.url&&e.getDetail(n.housecontent.url,{picCode:n.housecontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.housecontent.query_time=o.init_query_time,n.housecontent.dep_name=o.dep_name,n.housecontent.title=o.title;var r=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;o.max_and_min&&(l=Math.round(o.max_and_min[0].minValue),s=Math.round(o.max_and_min[0].maxValue)),o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.nameTextStyle={color:r[5]},n.axisLabel={textStyle:{color:r[5]}},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisTick={},n.axisTick.inside=!0,n.axisLine={lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},n.splitLine={show:!0,interval:"auto",lineStyle:{color:r[2]}},n.splitArea={show:!0,areaStyle:{color:r[3]}},o.max_and_min){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,o.yAxis.push(n)}),_.forEach(o.series,function(e){"bar"==e.type&&(e.barMaxWidth="40%"),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,m="24%",u="10%";c<1600&&(m="36%",u="12%");var d={color:r,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:o.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:u,right:u,bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:r[1],shadowColor:r[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:r[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:r[2]}},splitArea:{show:!0,areaStyle:{color:r[3]}},data:o.x_data}],yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize2=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize2()})}})}}}]),e.directive("serviceChartEnt",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{entcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.entcontent&&n.entcontent.url&&e.getDetail(n.entcontent.url,{picCode:n.entcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.entcontent.model||""==o.init_query_time||(n.entcontent.model=new Date(o.init_query_time)),n.entcontent.query_time=o.init_query_time,n.entcontent.dep_name=o.dep_name,n.entcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c=60,m="10%",u="16%",d=12;s<1600&&(c="30%",m="12%",u="18%");var p=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisTick={},n.axisTick.inside=!0,o.max_and_min&&o.max_and_min[t]){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,n.axisLine={onZero:!1,lineStyle:{color:p[3],shadowColor:p[3],shadowBlur:4}},n.axisLabel={},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisLabel.textStyle={color:p[5]},n.nameTextStyle={color:p[5]},n.splitLine={show:!0,interval:"auto",lineStyle:{color:p[3]}},n.splitArea={show:!0,areaStyle:{color:p[4]}},o.yAxis.push(n)}),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),"bar"==e.type&&(e.barMaxWidth="30%"),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!1,position:n}}});var f={color:p,tooltip:{trigger:"axis"},legend:{left:"center",top:2,data:o.legend,textStyle:{fontSize:12,color:p},itemWidth:15,itemHeight:6},grid:{top:c,left:m,right:u,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:o.x_data,axisLine:{lineStyle:{color:p[3],shadowColor:p[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:d,color:p[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:p[3]}},splitArea:{show:!0,areaStyle:{color:p[4]}}},yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(f)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(f))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("serviceChartGoods",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{goodscontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.goodscontent&&n.goodscontent.url&&e.getDetail(n.goodscontent.url,{picCode:n.goodscontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.goodscontent.query_time=o.init_query_time,n.goodscontent.dep_name=o.dep_name,n.goodscontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="16%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("serviceChartTraffic",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{trafficontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.trafficontent&&n.trafficontent.url&&e.getDetail(n.trafficontent.url,{picCode:n.trafficontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.trafficontent.query_time=o.init_query_time,n.trafficontent.dep_name=o.dep_name,n.trafficontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="16%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}])}(),function(){var e=angular.module("app.profile.spot",["angular-bootstrap-select","angular-bootstrap-select.extra"]);e.$inject=["$location"],e.controller("spotController",["$scope","spotService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){function r(){e.time_params={},e.time_params.year=t.getDateFormat(e.commondata.model,"yyyy"),e.commondata.byMonth?e.time_params.month=e.commondata.month:e.time_params.quarter=e.commondata.quarter}i.showMenu=!0,e.isActive=1,i.currentMenu=!1,$(".profile").css({background:"url(assets/images/bg.png)"}),e.showChart=function(n,a){e.isActive=n;var o={};o.menuId=a,e.group&&(o.groupId=e.group.groupId?e.group.groupId:e.group);var i=null,r=null,l=null,s=null,c=!1;e.commondata&&e.commondata.model&&(i=angular.copy(e.commondata.model),s=e.commondata.time_scope,c=e.commondata.byMonth,"quarter"==e.commondata.time_scope?r=e.commondata.quarter:"month"==e.commondata.time_scope&&(l=e.commondata.month)),e.commondata={},e.commondata.byMonth=c,s&&(e.commondata.time_scope=s),i&&(e.commondata.model=i),r&&(e.commondata.quarter=r),l&&(e.commondata.month=l),t.getContent(o).then(function(t){1==n&&(e.increasedata=_.sortBy(t.data,["picCode"]),e.rankdata=null,e.targetdata=null),2==n&&(e.rankdata=_.sortBy(t.data,["picCode"]),e.increasedata=null,e.targetdata=null),3==n&&(e.targetdata=_.sortBy(t.data,["picCode"]),e.rankdata=null,e.increasedata=null)})},e.menuactive=0,e.tabMenu=function(n,a,o){e.menuactive=n,e.isActive=1,6==o?(e.hasGroup=!0,t.getGroups({menuId:a}).then(function(n){e.groupOptions=_.sortBy(n.data,["groupId"]),e.group=e.groupOptions[0],t.getMenus({parentId:a}).then(function(n){e.submenus=_.sortBy(n.data,["id"]),t.getContent({menuId:e.submenus[0].id,groupId:e.groupOptions[0].groupId}).then(function(t){e.commondata={},e.increasedata=_.sortBy(t.data,["picCode"])})})})):5==o?(e.hasGroup=!1,e.submenus=null,e.targetdata=null,e.rankdata=null,e.commondata.totalAmount=null,e.commondata.totalUnit=null,t.getContent({menuId:a}).then(function(t){e.commondata={},e.increasedata=_.sortBy(t.data,["picCode"])})):(e.hasGroup=!1,e.group=null,t.getMenus({parentId:a}).then(function(n){e.submenus=_.sortBy(n.data,["id"]),t.getContent({menuId:e.submenus[0].id}).then(function(t){e.commondata={},e.increasedata=_.sortBy(t.data,["picCode"])})}))},e.quarterOptions=[{id:3,name:"第1季度"},{id:6,name:"1-2季度"},{id:9,name:"1-3季度"},{id:12,name:"1-4季度"}],e.monthOptions=[{id:1,name:"1月"},{id:2,name:"2月"},{id:3,name:"3月"},{id:4,name:"4月"},{id:5,name:"5月"},{id:6,name:"6月"},{id:7,name:"7月"},{id:8,name:"8月"},{id:9,name:"9月"},{id:10,name:"10月"},{id:11,name:"11月"},{id:12,name:"12月"}],e.commondata={},e.dateOptions={},e.dateOptions.format="yyyy",e.dateOptions.minMode="year",e.dateOptions.datepickerMode="year",e.altInputFormats=["M!/d!/yyyy"],e.commondata.byMonth=!1,e.open=function(){e.dateOptions.opened=!0},e.spotlist=[];var l=a.proid;t.getMenus({parentId:l}).then(function(n){e.menus=n.data,_.forEach(e.menus,function(e){2==e.name.length&&(e.name=e.name.split("").join(" "))}),t.getMenus({parentId:e.menus[0].id}).then(function(n){e.submenus=_.sortBy(n.data,["id"]),t.getContent({menuId:e.submenus[0].id}).then(function(t){e.increasedata=_.sortBy(t.data,["picCode"])})})}),e.changed=function(){r()},e.quarterChanged=function(){r()},e.monthChanged=function(){r()},e.groupChanged=function(){e.showChart(e.isActive,e.submenus[e.isActive-1].id)},Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("spotService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(n){return e.get(t+"/main/showGroup",{params:n})}function r(e,t){var n=angular.copy(e);return n&&angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:r,getGroups:i}}]),e.directive("chartIncreaseTotal",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{increasetotal:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),n.commoninfo.promiseIncrease=e.getDetail(n.increasetotal.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.increasetotal.picCode}).then(function(e){var o=e.data;if(o&&o.series){if(n.commoninfo.dep_name=o.dep_name,n.increasetotal.active=!0,"quarter"==o.time_scope?n.commoninfo.byMonth=!1:n.commoninfo.byMonth=!0,!n.commoninfo.model&&""!=o.init_query_time){n.commoninfo.time_scope=o.time_scope,n.commoninfo.model=new Date(o.init_query_time);var i=o.init_query_time.substring(o.init_query_time.indexOf("-")+1);"quarter"==o.time_scope?(n.commoninfo.byMonth=!1,n.commoninfo.quarter=Number(i)):(n.commoninfo.byMonth=!0,n.commoninfo.month=Number(i))}var l=o.series[0].data,s=[],c=!1;_.forEach(l,function(e){var t={};t.value=e.value,"1"==e.highLight?(t.itemStyle={normal:{color:"rgba(8, 220, 60, 0.83)",borderColor:"rgb(7,218,63)",borderWidth:1}},""!=e.value&&(c=!0),n.commoninfo.totalAmount=e.value):(t.itemStyle={normal:{color:"rgb(0,168,228)",borderColor:"rgba(16,185,214,1)",borderWidth:1}},n.commoninfo.totalLastAmount=e.value),n.commoninfo.title=o.title,n.commoninfo.totalTitle="总量",n.commoninfo.totalUnit=o.y_name[0],n.commoninfo.floatNum="",""==n.commoninfo.totalLastAmount?n.commoninfo.floatDesc="--":(n.commoninfo.floatNum=(parseFloat(n.commoninfo.totalAmount)-parseFloat(n.commoninfo.totalLastAmount)).toFixed(2),n.commoninfo.floatNum>=0?n.commoninfo.floatDesc="增加":n.commoninfo.floatDesc="减少"),s.push(t)}),n.commoninfo.othertotal=_.filter(l,function(e){return"1"!=e.highLight});var m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b} : {c}"+o.y_name[0]},grid:{left:"9%",right:"19%",bottom:"8%",top:"0",containLabel:!0},xAxis:{type:"value",nameLocation:"end",position:"top",axisTick:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},yAxis:{type:"category",name:"",nameLocation:"start",boundaryGap:!0,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0, 120, 255, 0.5)"}},axisLabel:{interval:0,textStyle:{color:"rgb(246,246,246)",fontSize:14}},inverse:"false",data:o.x_data},series:[{name:o.series[0].name,type:"bar",barMaxWidth:s.length<3?"30%":"50%",label:{normal:{show:!0,position:"right",formatter:"{c}"+o.y_name[0],textStyle:{color:"rgb(246,246,246)",fontSize:14}}},itemStyle:{normal:{color:"#00fef8",borderColor:"#30fef9",borderWidth:1}},data:s}]},u={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"chuan_east_north",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",
borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),c?r.setOption(m):r.setOption(u),n.onResize=function(){r&&(r.clear(),r.resize(),c?r.setOption(m):r.setOption(u))},angular.element(t).bind("resize",function(){n.onResize()})}})}var r=null;n.increasetotal&&n.increasetotal.url&&(n.$watch("increasetotal",function(e,t){e!==t&&e&&t&&!e.active&&i()},!0),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartIncreaseRate",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{increaserate:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){n.commoninfo.promiseIncrease.then(function(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),e.getDetail(n.increaserate.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.increaserate.picCode}).then(function(e){var o=e.data;if(o&&o.series){if(n.commoninfo.dep_name=o.dep_name,n.increaserate.active=!0,"quarter"==o.time_scope?n.commoninfo.byMonth=!1:n.commoninfo.byMonth=!0,!n.commoninfo.model&&""!=o.init_query_time){n.commoninfo.time_scope=o.time_scope,n.commoninfo.model=new Date(o.init_query_time);var i=o.init_query_time.substring(o.init_query_time.indexOf("-")+1);"quarter"==o.time_scope?(n.commoninfo.byMonth=!1,n.commoninfo.quarter=Number(i)):(n.commoninfo.byMonth=!0,n.commoninfo.month=Number(i))}n.commoninfo.title=o.title;var l=o.series[0].data,s=[],c=!1;_.forEach(l,function(e){var t={};""!=e.value&&(e.value=parseFloat(e.value).toFixed(2)),t.value=e.value,"1"==e.highLight?(t.itemStyle={normal:{color:"rgba(8, 220, 60, 0.83)",borderColor:"rgb(7,218,63)",borderWidth:1}},""!=e.value&&(c=!0),n.commoninfo.rateTotal=e.value,n.commoninfo.rateUnit=o.y_name[0]):t.itemStyle={normal:{color:"rgb(0,168,228)",borderColor:"rgba(16,185,214,1)",borderWidth:1}},s.push(t)}),n.commoninfo.otherrate=_.filter(l,function(e){return"1"!=e.highLight});var m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b} : {c}"+o.y_name[0]},grid:{left:"9%",right:"15%",bottom:"8%",top:"0",containLabel:!0},xAxis:{type:"value",nameLocation:"end",position:"top",axisTick:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},yAxis:{type:"category",name:"",nameLocation:"start",boundaryGap:!0,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0, 120, 255, 0.5)"}},axisLabel:{interval:0,textStyle:{color:"rgb(246,246,246)",fontSize:14}},inverse:"false",data:o.x_data},series:[{name:o.series[0].name,type:"bar",barMaxWidth:s.length<3?"30%":"50%",label:{normal:{show:!0,position:"right",formatter:"{c}"+o.y_name[0],textStyle:{color:"rgb(246,246,246)",fontSize:14}}},data:s}]},u={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"bz_single",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),c?r.setOption(m):r.setOption(u),n.onResize=function(){r&&(r.clear(),r.resize(),c?r.setOption(m):r.setOption(u))},angular.element(t).bind("resize",function(){n.onResize()})}})})}var r=null;n.increaserate&&n.increaserate.url&&(n.$watch("increaserate",function(e,t){e!==t&&e&&t&&!e.active&&i()},!0),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartRankTotal",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{rankdata:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),n.commoninfo.promiseRank=e.getDetail(n.rankdata.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.rankdata.picCode}).then(function(i){var l=i.data;if(l&&l.series){if(n.commoninfo.dep_name=l.dep_name,n.rankdata.active=!0,!n.commoninfo.model&&""!=l.init_query_time){n.commoninfo.time_scope=l.time_scope,n.commoninfo.byMonth=!0,n.commoninfo.model=new Date(l.init_query_time);var s=l.init_query_time.substring(l.init_query_time.indexOf("-")+1);"quarter"==l.time_scope?(n.commoninfo.quarter=Number(s),n.commoninfo.byMonth=!1):(n.commoninfo.month=Number(s),n.commoninfo.byMonth=!0)}"different"==l.table_type&&""!=l.table_url&&e.getDetail(l.table_url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.rankdata.picCode}).then(function(e){n.commoninfo.rankdetail=e.data,_.forEach(n.commoninfo.rankdetail,function(e){e.floatValue=parseInt(e.floatValue),e.value=parseInt(e.value)})});var c=l.series[0].data,m=[];c=_.sortBy(c,[function(e){return-e.value}]);var u=!1;_.forEach(c,function(e,t){var a={};a.value=e.value,a.name=e.name,"1"==e.highLight?(a.itemStyle={normal:{color:"#00fef8",borderColor:"#30fef9",borderWidth:1}},""!=e.value&&(u=!0),n.commoninfo.totalAmount=e.value,n.commoninfo.rankNum=t+1):a.itemStyle={normal:{color:"rgb(0,168,228)",borderColor:"rgba(16,185,214,1)",borderWidth:1}},n.commoninfo.title=l.title,n.commoninfo.totalTitle="总量",n.commoninfo.totalUnit=l.y_name[0],m.push(a)});var d=screen.width,p="16%";d<1400&&(p="28%");var f={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b} : {c}"+l.y_name[0]},grid:{left:"10%",right:"12%",bottom:"12%",top:p,containLabel:!0},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},xAxis:{type:"",name:"",nameLocation:"start",boundaryGap:!0,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0, 120, 255, 0.5)"}},axisLabel:{interval:0,textStyle:{color:"rgb(246,246,246)",fontSize:14}},data:_.map(m,"name")},series:[{name:l.series[0].name,type:"bar",barMaxWidth:m.length<3?"20%":"30%",label:{normal:{show:!0,position:"top",formatter:"{c}",textStyle:{color:"rgb(246,246,246)",fontSize:14}}},data:m}]},h={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"chuan_east_north",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),u&&"10721"!=n.rankdata.picCode&&"10723"!=n.rankdata.picCode?r.setOption(f):r.setOption(h),n.onResize2=function(){r&&(r.clear(),r.resize(),u&&"10721"!=n.rankdata.picCode&&"10723"!=n.rankdata.picCode?r.setOption(f):r.setOption(h))},angular.element(t).bind("resize",function(){n.onResize2()})}})}var r=null;n.rankdata&&n.rankdata.url&&(n.$watch("rankdata",function(e,t){e!==t&&e&&t&&!e.active&&i()}),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartRankRate",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{rankrate:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){n.commoninfo.promiseRank.then(function(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),e.getDetail(n.rankrate.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.rankrate.picCode}).then(function(i){var l=i.data;if(l&&l.series){if(n.commoninfo.dep_name=l.dep_name,n.rankrate.active=!0,!n.commoninfo.model&&""!=l.init_query_time){n.commoninfo.time_scope=l.time_scope,n.commoninfo.byMonth=!0,n.commoninfo.model=new Date(l.init_query_time);var s=l.init_query_time.substring(l.init_query_time.indexOf("-")+1);"quarter"==l.time_scope?(n.commoninfo.quarter=Number(s),n.commoninfo.byMonth=!1):(n.commoninfo.month=Number(s),n.commoninfo.byMonth=!0)}"different"==l.table_type&&""!=l.table_url&&e.getDetail(l.table_url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.rankrate.picCode}).then(function(e){n.commoninfo.rankratedetail=e.data,_.forEach(n.commoninfo.rankratedetail,function(e){e.floatValue=parseInt(e.floatValue),e.value=parseInt(e.value)})}),n.commoninfo.title=l.title;var c=l.series[0].data;c=_.sortBy(c,[function(e){return-e.value}]);var m=[],u=!1;_.forEach(c,function(e){var t={};t.value=e.value,t.name=e.name,"1"==e.highLight?(t.itemStyle={normal:{color:"#00fef8",borderColor:"#30fef9",borderWidth:1}},""!=e.value&&(u=!0),n.commoninfo.rateTotal=e.value,n.commoninfo.rateUnit=l.y_name[0]):t.itemStyle={normal:{color:"rgb(0,168,228)",borderColor:"rgba(16,185,214,1)",borderWidth:1}},m.push(t)});var d=screen.width,p="16%";d<1400&&(p="28%");var f={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b} : {c}"+l.y_name[0]},grid:{left:"12%",right:"12%",bottom:"12%",top:p,containLabel:!0},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},xAxis:{type:"",name:"",nameLocation:"start",boundaryGap:!0,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0, 120, 255, 0.5)"}},axisLabel:{interval:0,textStyle:{color:"rgb(246,246,246)",fontSize:14}},data:_.map(m,"name")},series:[{name:l.series[0].name,type:"bar",barMaxWidth:m.length<3?"20%":"30%",label:{normal:{show:!0,position:"top",formatter:"{c}%",textStyle:{color:"rgb(246,246,246)",fontSize:14}}},data:m}]},h={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"bz_single",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),u&&"10722"!=n.rankrate.picCode&&"10724"!=n.rankrate.picCode?r.setOption(f):r.setOption(h),n.onResize2=function(){r&&(r.clear(),r.resize(),u&&"10722"!=n.rankrate.picCode&&"10724"!=n.rankrate.picCode?r.setOption(f):r.setOption(h))},angular.element(t).bind("resize",function(){n.onResize2()})}})})}var r=null;n.rankrate&&n.rankrate.url&&(n.$watch("rankrate",function(e,t){e!==t&&e&&t&&!e.active&&i()}),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartTargetGoal",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{targetgoaldata:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),n.commoninfo.promiseTarget=e.getDetail(n.targetgoaldata.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.targetgoaldata.picCode}).then(function(e){function o(){return[{value:m-Math.floor(m),itemStyle:{normal:{color:"#f2c967",shadowBlur:10,shadowColor:"#f2c967"}}},{value:1-(m-Math.floor(m)),itemStyle:{normal:{color:"transparent"}}}]}var i=e.data;if(i&&i.series){if(n.commoninfo.dep_name=i.dep_name,n.targetgoaldata.active=!0,!n.commoninfo.model&&""!=i.init_query_time){n.commoninfo.time_scope=i.time_scope,n.commoninfo.byMonth=!0,n.commoninfo.model=new Date(i.init_query_time);var l=i.init_query_time.substring(i.init_query_time.indexOf("-")+1);"quarter"==i.time_scope?(n.commoninfo.quarter=Number(l),n.commoninfo.byMonth=!1):(n.commoninfo.month=Number(l),n.commoninfo.byMonth=!0)}var s=i.series,c=!1;_.forEach(s,function(e){"今年目标"==e.name?_.forEach(e.data,function(e){"1"==e.highLight&&(n.commoninfo.totalTitle="总量",n.commoninfo.totalAmount=e.value,n.commoninfo.totalUnit=e.unit,""!=e.value&&(c=!0)),"查询时间"==e.name&&(n.commoninfo.targetThisYear=e.value),"目标"==e.name&&(n.commoninfo.targetThisValue=e.value,n.commoninfo.targetThisUnit=e.unit)}):_.forEach(e.data,function(e){"查询时间"==e.name&&(n.commoninfo.targetFutureYear=e.value),"五年目标"==e.name&&(n.commoninfo.targetFutureValue=e.value,n.commoninfo.targetFutureUnit=e.unit)})});var m=0;""!=n.commoninfo.totalAmount&&""!=n.commoninfo.targetThisValue&&(m=(parseFloat(n.commoninfo.totalAmount)/parseFloat(n.commoninfo.targetThisValue)).toFixed(3)),n.commoninfo.percentThisYear=(100*m).toFixed(1);var u={title:{text:n.commoninfo.targetThisYear+"年目标："+n.commoninfo.targetThisValue+n.commoninfo.targetThisUnit,left:"center",top:"bottom",textStyle:{color:"rgb(240,240,240)",fontWeight:"normal",fontSize:14}},series:[{type:"liquidFill",data:[m],radius:"62%",waveAnimation:!1,outline:{borderDistance:0,itemStyle:{borderWidth:5,borderColor:"#156ACF"}},label:{normal:{show:!1,textStyle:{fontSize:30},formatter:function(e){return n.commoninfo.percentThisYear+"%"}}}}]};m>1&&(u.series[1]={name:"超额",type:"pie",radius:["64%","68%"],label:{normal:{show:!1}},data:o()});var d={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"chuan_east_north",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};setTimeout(function(){r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),c?r.setOption(u):r.setOption(d)},200),n.onResize=function(){r&&(r.clear(),r.resize(),c?r.setOption(u):r.setOption(d))},angular.element(t).bind("resize",function(){n.onResize()})}})}var r=null;n.targetgoaldata&&n.targetgoaldata.url&&(n.$watch("targetgoaldata",function(e,t){e!==t&&e&&t&&!e.active&&i()}),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartTargetGoalFuture",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{targetgoaldata:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),n.commoninfo.promiseTarget=e.getDetail(n.targetgoaldata.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.targetgoaldata.picCode}).then(function(e){function o(){return[{value:m-Math.floor(m),itemStyle:{normal:{color:"#f2c967",shadowBlur:10,shadowColor:"#f2c967"}}},{value:1-(m-Math.floor(m)),itemStyle:{normal:{color:"transparent"}}}]}var i=e.data;if(i&&i.series){if(n.commoninfo.dep_name=i.dep_name,n.targetgoaldata.active=!0,!n.commoninfo.model&&""!=i.init_query_time){n.commoninfo.time_scope=i.time_scope,n.commoninfo.byMonth=!0,n.commoninfo.model=new Date(i.init_query_time);var l=i.init_query_time.substring(i.init_query_time.indexOf("-")+1);"quarter"==i.time_scope?(n.commoninfo.quarter=Number(l),n.commoninfo.byMonth=!1):(n.commoninfo.month=Number(l),n.commoninfo.byMonth=!0)}var s=i.series,c=!1;n.commoninfo.title=i.title,_.forEach(s,function(e){"今年目标"==e.name?_.forEach(e.data,function(e){"1"==e.highLight&&(n.commoninfo.totalTitle="总量",n.commoninfo.totalAmount=e.value,n.commoninfo.totalUnit=e.unit,""!=e.value&&(c=!0)),"查询时间"==e.name&&(n.commoninfo.targetThisYear=e.value),"目标"==e.name&&(n.commoninfo.targetThisValue=e.value,n.commoninfo.targetThisUnit=e.unit)}):_.forEach(e.data,function(e){"查询时间"==e.name&&(n.commoninfo.targetFutureYear=e.value),"五年目标"==e.name&&(n.commoninfo.targetFutureValue=e.value,n.commoninfo.targetFutureUnit=e.unit)})});var m=0;""!=n.commoninfo.totalAmount&&""!=n.commoninfo.targetFutureValue&&(m=parseFloat(n.commoninfo.totalAmount)/parseFloat(n.commoninfo.targetFutureValue)),n.commoninfo.percentFutureYear=(100*m).toFixed(1);var u="";"10231"==n.targetgoaldata.picCode&&(u="累计");var d={title:{text:"巴中“十三五”目标："+u+n.commoninfo.targetFutureValue+n.commoninfo.targetFutureUnit,left:"center",top:"bottom",textStyle:{color:"rgb(240,240,240)",fontWeight:"normal",fontSize:14}},series:[{type:"liquidFill",data:[m],radius:"62%",waveAnimation:!1,outline:{borderDistance:0,itemStyle:{borderWidth:5,borderColor:"#156ACF"}},label:{normal:{show:!1,textStyle:{fontSize:30},formatter:function(e){return n.commoninfo.percentFutureYear+"%"}}}}]};m>1&&(d.series[1]={name:"超额",type:"pie",radius:["64%","68%"],label:{normal:{show:!1}},data:o()});var p={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"chuan_east_north",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};setTimeout(function(){r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),c?r.setOption(d):r.setOption(p)},200),n.onResize=function(){r&&(r.clear(),r.resize(),c?r.setOption(d):r.setOption(p))},angular.element(t).bind("resize",function(){n.onResize()})}})}var r=null;n.targetgoaldata&&n.targetgoaldata.url&&(n.$watch("targetgoaldata",function(e,t){e!==t&&e&&t&&!e.active&&i()}),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.directive("chartTargetRate",["spotService","$window",function(e,t){return{restrict:"ACE",scope:{targetratedata:"=",commoninfo:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(){n.commoninfo.promiseTarget.then(function(){var o=null;n.commoninfo&&n.commoninfo.model&&(o=angular.copy(n.commoninfo.model),"quarter"==n.commoninfo.time_scope?o.setMonth(n.commoninfo.quarter-1):"month"==n.commoninfo.time_scope&&o.setMonth(n.commoninfo.month-1)),e.getDetail(n.targetratedata.url,{queryTime:e.getDateFormat(o,"yyyy-MM"),picCode:n.targetratedata.picCode}).then(function(e){var o=e.data;if(o&&o.series){if(n.commoninfo.dep_name=o.dep_name,n.targetratedata.active=!0,!n.commoninfo.model&&""!=o.init_query_time){n.commoninfo.time_scope=o.time_scope,n.commoninfo.byMonth=!0,n.commoninfo.model=new Date(o.init_query_time);var i=o.init_query_time.substring(o.init_query_time.indexOf("-")+1);"quarter"==o.time_scope?(n.commoninfo.quarter=Number(i),n.commoninfo.byMonth=!1):(n.commoninfo.month=Number(i),n.commoninfo.byMonth=!0)}n.commoninfo.title=o.title;var l=o.series[0].data,s=[],c=!1;_.forEach(l,function(e){var t={};""!=e.value,t.value=e.value,t.name=e.name,"1"==e.highLight?(t.itemStyle={normal:{color:"rgb(245,222,68)",borderColor:"rgb(245,222,68)",borderWidth:1}},""!=e.value&&(c=!0),n.commoninfo.targetRateTotal=e.value,n.commoninfo.targetRateUnit=o.y_name[0]):t.itemStyle={normal:{color:"rgb(0,168,228)",borderColor:"rgba(16,185,214,1)",borderWidth:1}},s.push(t)}),n.commoninfo.othertargetrate=_.filter(l,function(e){return"1"!=e.highLight});var m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b} : {c}"+o.y_name[0]},grid:{left:"9%",right:"18%",bottom:"8%",top:"0",containLabel:!0},xAxis:{type:"value",nameLocation:"end",position:"top",axisTick:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},yAxis:{type:"category",name:"",nameLocation:"start",boundaryGap:!0,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0, 120, 255, 0.5)"}},axisLabel:{interval:0,textStyle:{color:"rgb(246,246,246)",fontSize:14}},data:_.map(s,"name")},series:[{name:o.series[0].name,type:"bar",barMaxWidth:s.length<3?"30%":"50%",label:{normal:{show:!0,position:"right",formatter:"{c}%",textStyle:{color:"rgb(246,246,246)",fontSize:14}}},data:s}]},u={legend:{orient:"vertical",left:"left"},series:[{name:"川东北经济区排位",type:"map",map:"bz_single",left:"20%",top:20,right:"20%",bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"rgba(0, 120, 255, 0.5)",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid",borderWidth:1}},markPoint:{symbol:"pin",symbolSize:50}}]};r=echarts.init(a.find("div")[0]),r.clear(),r.resize(),c?r.setOption(m):r.setOption(u),n.onResize=function(){r&&(r.clear(),r.resize(),c?r.setOption(m):r.setOption(u))},angular.element(t).bind("resize",function(){n.onResize()})}})})}var r=null;n.targetratedata&&n.targetratedata.url&&(n.$watch("targetratedata",function(e,t){e!==t&&e&&t&&!e.active&&i()}),n.$watch("commoninfo.model",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.quarter",function(e,t){e!==t&&e&&t&&i()},!0),n.$watch("commoninfo.month",function(e,t){e!==t&&e&&t&&i()},!0),i())}}}]),e.filter("toPositive",function(){return function(e){return e&&"string"==typeof e&&e.indexOf(".")>-1?Math.abs(e).toFixed(2):""==e?"":Math.abs(e)}})}(),function(){var e=angular.module("app.profile.travel",[]);e.$inject=["$location"],e.controller("travelController",["$scope","travelService","$state","$stateParams","$window","$rootScope",function(e,t,n,a,o,i){var r=this;i.showMenu=!0,$(".profile").css({background:"url(assets/images/bg.png)"}),e.travellist=[];var l=a.proid;i.currentMenu=l,t.getContent({menuId:l}).then(function(t){r.travelcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.travelcontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.travellist.push(n)})}),t.gettravelData({picCode:5003}).then(function(e){r.travelData=e.data,$(".datalist").mCustomScrollbar()}),t.gettravelData({picCode:5007}).then(function(e){r.travelDataDown=e.data,$(".datalist").mCustomScrollbar()})}]),e.factory("travelService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/menu",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n){return e.get(t+"/main/showPics",{params:n})}function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(n){return e.get(t+"/identity/table",{params:n})}return{getMenus:n,getDetail:a,getContent:o,getDateFormat:i,gettravelData:r}}]),e.directive("travelChartHouse",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{housecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.housecontent&&n.housecontent.url&&e.getDetail(n.housecontent.url,{picCode:n.housecontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.housecontent.query_time=o.init_query_time,n.housecontent.dep_name=o.dep_name,n.housecontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="10%");var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisTick={},n.axisTick.inside=!0,o.max_and_min&&o.max_and_min[t]){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i<5&&(i=4),i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,n.axisLine={onZero:!1,lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},n.axisLabel={},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},n.axisLabel.textStyle={color:u[5]},n.nameTextStyle={color:u[5]},n.splitLine={show:!0,interval:"auto",lineStyle:{color:u[3]}},n.splitArea={show:!0,areaStyle:{color:u[4]}},o.yAxis.push(n)}),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";(t+1)%2!=0&&(n="bottom"),e.label={normal:{show:!0,position:n}}});var d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:m,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("travelChartSite",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{sitecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.sitecontent&&n.sitecontent.url&&e.getDetail(n.sitecontent.url,{queryTime:e.getDateFormat(n.sitecontent.model,n.sitecontent.format),picCode:n.sitecontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.sitecontent.model||""==o.init_query_time||(n.sitecontent.model=new Date(o.init_query_time)),n.sitecontent.query_time=o.init_query_time,n.sitecontent.dep_name=o.dep_name,n.sitecontent.title=o.title;var r={};r.formatYear="yyyy","year"==o.time_scope&&(n.econtent.format="yyyy",r.minMode="year",r.datepickerMode="year"),"month"==o.time_scope&&(n.sitecontent.format="yyyy-MM",r.minMode="month",r.datepickerMode="month"),n.sitecontent.dateOptions=r,_.forEach(o.series[1].data,function(e){});var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+o.y_name[0]+"<br/>",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:o.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+o.y_name[0]},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:o.series[0].data},{name:o.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=n==e.data.other.length-1?e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit:e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"\n\n";else t=e.data.name+":"+e.data.value+"\n\n",o.auto_count&&"percent"==o.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:o.series[1].data}]},c=screen.width;c<1600&&(s.series[1].startAngle=130,s.series[1].labelLine={normal:{length:14,length2:8}},s.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},s.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(s)},600),n.onResize1=function(){i&&(i.clear(),i.resize(),i.setOption(s))},angular.element(t).bind("resize",function(){n.onResize1()})}})}}}]),e.directive("travelChartResta",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{restacontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.restacontent&&n.restacontent.url&&e.getDetail(n.restacontent.url,{picCode:n.restacontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.restacontent.query_time=o.init_query_time,n.restacontent.dep_name=o.dep_name,n.restacontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="10%");var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];o.yAxis=[],_.forEach(o.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisTick={},n.axisTick.inside=!0,o.max_and_min&&o.max_and_min[t]){var a=Number(o.max_and_min[t].minValue),i=Number(o.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,i=1+i,n.min=Math.round(a),n.max=Math.round(i)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,n.axisLine={onZero:!1,lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},n.axisLabel={},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},n.axisLabel.textStyle={color:u[5]},n.nameTextStyle={color:u[5]},n.splitLine={show:!0,interval:"auto",lineStyle:{color:u[3]}},n.splitArea={show:!0,areaStyle:{color:u[4]}},o.yAxis.push(n)}),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";(t+1)%2!=0&&(n="bottom"),e.label={normal:{show:!0,position:n}}});var d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:m,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:o.x_data,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:o.yAxis,series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("travelChartTour",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{tourcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.tourcontent&&n.tourcontent.url&&e.getDetail(n.tourcontent.url,{picCode:n.tourcontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.tourcontent.query_time=o.init_query_time,n.tourcontent.dep_name=o.dep_name,n.tourcontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="10%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",
e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";(t+1)%2!=0&&(n="bottom"),e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}]),e.directive("travelChartSiterun",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{siteruncontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){var i=null;n.siteruncontent&&n.siteruncontent.url&&e.getDetail(n.siteruncontent.url,{picCode:n.siteruncontent.picCode}).then(function(e){var o=e.data;if(o&&o.series){n.siteruncontent.query_time=o.init_query_time,n.siteruncontent.dep_name=o.dep_name,n.siteruncontent.title=o.title;var r=0,l=0;o.max_and_min&&(r=Math.round(o.max_and_min[0].minValue),l=Math.round(o.max_and_min[0].maxValue));var s=screen.width,c="24%",m="10%";s<1600&&(c="32%",m="10%"),_.forEach(o.series,function(e,t){"line"==e.type&&(e.connectNulls=!0),e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var n="top";(t+1)%2!=0&&(n="bottom"),e.label={normal:{show:!0,position:n}}});var u=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],d={color:u,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:o.legend,textStyle:{fontSize:12,color:u},itemWidth:15,itemHeight:6},grid:{left:m,right:"3.5%",bottom:30},xAxis:{type:"category",data:o.x_data,axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:u[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},textStyle:{color:u[5]}},name:o.y_name,nameTextStyle:{color:u[5]},min:r,max:l,splitBumber:5,interval:(l-r)/5,axisLine:{lineStyle:{color:u[3],shadowColor:u[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:u[3]}},splitArea:{show:!0,areaStyle:{color:u[4]}}},series:o.series};setTimeout(function(){i=echarts.init(a.find("div")[0]),i.clear(),i.resize(),i.setOption(d)},600),n.onResize4=function(){i&&(i.clear(),i.resize(),i.setOption(d))},angular.element(t).bind("resize",function(){n.onResize4()})}})}}}])}(),function(){var e=angular.module("app.main.module.content.detail",["ui.bootstrap","cgBusy"]);e.controller("detailController",["$scope","detailService","$stateParams","uibDateParser","$rootScope",function(e,t,n,a,o){var i=this;o.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.popups=[],e.quarterOptions=[{id:3,name:"第一季度"},{id:6,name:"第二季度"},{id:9,name:"第三季度"},{id:12,name:"第四季度"}],e.promiseMain=t.getContent({menuId:n.pid}).then(function(t){i.dcontent=_.sortBy(t.data,["picCode"]),_.forEach(i.dcontent,function(t){var n={};n.opened=!1,n.url=t.url,n.picCode=t.picCode,e.popups.push(n)})}),e.open=function(t){e.popups[t].opened=!0},e.changed=function(t){if(angular.isDate(e.popups[t].model)&&!isNaN(e.popups[t].model.getTime()))return"quarter"!=e.popups[t].time_scope||e.popups[t].quarter?void 0:void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("detailService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(n,a){return e.get(t+n,{params:a})}return{getContent:n,getDetail:a,getTableData:o}}]),e.directive("wiservChart",["detailService","$window",function(e,t){return{restrict:"ACE",scope:{content:"="},template:"<div style='width:100%;height:100%'></div>",link:function(n,a,o){function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(){var o=angular.copy(n.content.model),r=angular.copy(n.content.format);n.content.model&&"quarter"==n.content.time_scope&&(o.setMonth(n.content.quarter-1),r="yyyy-MM"),n.content.promise=e.getDetail(n.content.url,{queryTime:i(o,r),picCode:n.content.picCode}).then(function(c){var m=c.data;if(m&&m.series&&m.series[0]){if(!n.content.model&&""!=m.init_query_time&&(n.content.model=new Date(m.init_query_time),!n.content.quarter)){var u=m.init_query_time.substring(m.init_query_time.indexOf("-")+1);n.content.quarter=Number(u)}n.content.dep_name=m.dep_name,n.content.time_scope=m.time_scope;var d={};d.formatYear="yyyy","year"==m.time_scope&&(n.content.format="yyyy",d.minMode="year",d.datepickerMode="year"),"month"==m.time_scope&&(n.content.format="yyyy-MM",d.minMode="month",d.datepickerMode="month"),"quarter"==m.time_scope&&(n.content.format="yyyy",d.minMode="year",d.datepickerMode="year"),n.content.dateOptions=d;var p=screen.width,f=!0;p<1200&&(f=!1),m.yAxis=[],_.forEach(m.y_name,function(e,t){var n={};if(n.type="value",n.name=e,n.axisTick={},n.axisTick.inside=!0,m.max_and_min&&m.max_and_min[t]){var a=Number(m.max_and_min[t].minValue),o=Number(m.max_and_min[t].maxValue);a>=0&&a<1?a=0:a-=1,o<5&&(o=4),o=1+o,n.min=Math.round(a),n.max=Math.round(o)}n.splitBumber=5,n.interval=(n.max-n.min)/n.splitBumber,n.axisLine={onZero:!1},n.axisLabel={},n.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(0):e},m.yAxis.push(n)});var h=["rgb(0,112,192)","rgb(72,200,126)","rgb(228,92,93)","rgb(71,190,121)"],g=["#FFF","rgb(90,177,239)","rgb(46,199,201)","rgb(182,162,222)","rgb(228,92,93)"],v=["rgb(90,177,239)","rgb(46,199,201)","rgb(182,162,222)","rgb(228,92,93)"];if("pie"==m.series[0].type)s.series=m.series,1==s.series.length&&(g=v,s.series[0].radius=[0,"50%"]),s.color=g,m.series.length>1&&(s.series[0].radius=[0,"26%"],s.series[1].label={},s.series[1].label.normal={},s.series[1].label.normal.formatter=function(e){var t="\n\n"+e.data.name+"\n";if(p>=1200)if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"\n";else t=e.data.name+":"+e.data.value+e.data.unit+"\n",m.auto_count&&"percent"==m.auto_count&&(t+="占比："+e.percent+"%");return t},s.series[1].radius=["26%","48%"]),s.tooltip={trigger:"item",position:"top",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var n=0;n<e.data.other.length;n++)t+=e.data.other[n].name+":"+e.data.other[n].value+e.data.other[n].unit+"<br/>";else t=e.data.name+":"+e.data.value+m.y_name[0]+"<br/>",m.auto_count&&"percent"==m.auto_count&&(t+="占比："+e.percent+"%");return t}},s.title={text:m.title,left:"center"},s.series[0].label={},s.series[0].label.normal={},s.series[0].label.normal.position="center",s.series[0].label.normal.textStyle={color:"#333"},1==s.series.length&&(s.series[0].label.normal.position="outside"),s.series[0].label.normal.formatter="{b}\n {c}"+m.y_name[0],"1231"==n.content.picCode&&(s.series[1].startAngle=120);else if("radar"==m.series[0].type){var y=[];_.forEach(m.x_data,function(e,t){var n={};n.name=e;var a=0,o=0;if(1==m.series[0].data.length){var i=_.map(m.series[0].data,"value")[0];a=Number(i[t]),o=Number(i[t]),_.forEach(i[0],function(e,t){Number(i[t])>a&&(a=Number(i[t])),Number(i[t])<o&&(o=Number(i[t]))})}else{var i=_.map(m.series[0].data,"value"),r=[];_.forEach(i,function(e,t){r=_.concat(e,r)}),a=Number(r[0]),o=Number(r[0]),_.forEach(r,function(e){Number(e)>a&&(a=Number(e)),Number(e)<o&&(o=Number(e))})}n.max=a,n.min=.8*o,y.push(n)}),_.forEach(m.series[0].data,function(e,t){var n=angular.copy(e.value);e.trueValue=n,_.forEach(e.value,function(t,n){e.value[n]=_.toNumber(t)})}),_.forEach(m.series[0].data,function(e,t){var n=_.max(e.value);if(y[0].max>n){var a=parseInt(y[0].max/n);_.forEach(e.value,function(t,n){e.value[n]=(t*a).toFixed(2)})}}),s.color=h,s.tooltip={position:"top",formatter:function(e){var t=e.name+"<br/>";return _.forEach(m.x_data,function(n,a){t+=n+":"+e.data.trueValue[a]+"<br/>"}),t}},s.legend={top:"bottom",bottom:20,data:m.legend,textStyle:{fontSize:14,fontWeight:"bolder"}},s.title={text:m.title,left:"center"},s.radar={},s.radar.name={textStyle:{color:"#333",fontSize:14}},p<1200&&(s.radar.name.formatter=function(e){var t=e.length,n="";if(t>4){var a="",o="";if(a=e.substring(0,t-4),a.length>8){var i=a.substring(0,a.length-4),r=a.substring(a.length-4);a=i+"\n"+r}o=e.substring(t-4),n=a+"\n"+o}else n=e;return n}),s.radar.nameGap=8,s.radar.radius="60%",p<1200&&(s.radar.radius="45%"),s.radar.indicator=y,"2321"==n.content.picCode&&(s.radar.startAngle=162),s.series=m.series}else{var b="",x="top",w={},S=70;p<1200&&(S=90),"1"==m.need_group&&(b="group",x="inside",h=v),m.series[0].data.length>10?w={interval:0,formatter:function(e,t){return e.indexOf("月")>-1?(p<1200&&t%2!=0&&(e="\n"+e),e):e.split("").join("\n")}}:m.series[0].data.length>4&&p<1200&&(w={interval:0,formatter:function(e,t){return t%2!=0&&(e="\n"+e),e}}),w.interval=0,w.textStyle={fontWeight:"bolder"},p<1200&&(w.textStyle={fontWeight:"normal"}),_.forEach(m.series,function(e,t){if(e.label={normal:{show:f,position:x,textStyle:{fontSize:12}}},"4211"!=n.content.picCode&&"4221"!=n.content.picCode&&"4231"!=n.content.picCode||(e.label.normal={show:!1}),"bar"==e.type&&(e.data.length<3?e.barMaxWidth="20%":(e.barMaxWidth="40%",e.data.length>10?e.label={normal:{show:!1}}:e.label={normal:{show:f,position:x,textStyle:{fontSize:12,fontWeight:"bolder"}}})),"line"==e.type){var a=_.map(e.data,"name");a&&a.length>1&&1==_.uniq(a).length&&(e.symbol="roundCircle",e.symbolSize=1,_.forEach(e.data,function(e,t){0==t?e.label={normal:{show:f,textStyle:{fontWeight:"bolder"}}}:e.label={normal:{show:!1}}}))}e.data.length>5&&_.forEach(e.data,function(t){t.name&&t.name.length>5&&e.data.length>12&&("2322"==n.content.picCode?(S=100,p<1200&&(S=120)):(S=190,p<1200&&(S=210)))}),e.connectNulls=!0,e.stack=b});var C="10%",M="10%",z="15%";p<1600&&(p<1200?(C="16%",M="14%",z="18%"):(C="15%",M="15%")),s={color:h,title:{text:m.title,left:"center",top:-4},tooltip:{trigger:"axis",position:function(e,t,n){return.56*p<$(n).outerWidth()?["20%","40%"]:t[0].dataIndex>=m.x_data.length/2?[e[0]-$(n).outerWidth(),"40%"]:[e[0],"40%"]}},legend:{top:"bottom",bottom:20,data:m.legend,textStyle:{fontSize:14,fontWeight:"bolder"}},grid:{bottom:S,top:z,left:C,right:M},xAxis:[{type:"category",axisTick:{show:!1},axisLabel:w,data:m.x_data}],yAxis:m.yAxis,series:m.series}}if("same"==m.table_type){n.content.columnNames=m.x_data;var k=[];"radar"==m.series[0].type?_.forEach(m.series[0].data,function(e,t){var n={};n.rowName=e.name;var a=[];_.forEach(e.trueValue,function(e){var t={};t.value=e,a.push(t)}),n.rowValue=a,k.push(n)}):_.forEach(m.legend,function(e,t){var n={};n.rowName=e,n.rowValue=m.series[t].data,k.push(n)}),n.content.rowData=k}else if("reverse"==m.table_type){n.content.columnNames=m.legend;var k=[];_.forEach(m.x_data,function(e,t){var n={};n.rowName=e;var a=[];"radar"==m.series[0].type?_.forEach(m.series[0].data,function(e,n){var o={};o.name=e.name,o.value=e.trueValue[t],a.push(o)}):_.forEach(m.series,function(e,n){var o={};o.name=e.name,o.value=m.series[n].data[t].value,a.push(o)}),n.rowValue=a,k.push(n)}),n.content.rowData=k}else"form"==m.table_type?(n.content.formTable=!0,e.getTableData(m.table_url,{picCode:n.content.picCode,queryTime:i(o,r)}).then(function(e){n.content.rowData=e.data})):e.getTableData(m.table_url,{picCode:n.content.picCode,queryTime:i(o,r)}).then(function(e){n.content.columnNames=_.map(e.data.rowData[0].rowValue,"name"),n.content.rowData=e.data.rowData});if("4112"==n.content.picCode){var q=m.series[0].data,D=m.series[1].data;p>1200?a.find("div")[0].innerHTML='<div class="item-wrap"><h3 class="chart-title" style="margin-top: 0;">'+m.title+'</h3><div class="chart-item"><div class="item"><div class="pic pic-home"><i class="fa fa-home"></i></div></div><div class="item"><div class="pic pic-home"><i class="fa fa-rmb"></i></div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[0].name+"："+q[0].value+q[0].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"："+D[0].value+D[0].unit+'</div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[1].name+"："+q[1].value+q[1].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"："+D[1].value+D[1].unit+'</div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[2].name+"："+q[2].value+q[2].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"："+D[2].value+D[2].unit+"</div></div></div><div>":a.find("div")[0].innerHTML='<div class="item-wrap"><h3 class="chart-title" style="margin-top: 0;">'+m.title+'</h3><div class="chart-item"><div class="item"><div class="pic pic-home"><i class="fa fa-home"></i></div></div><div class="item"><div class="pic pic-home"><i class="fa fa-rmb"></i></div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[0].name+"：<br/>"+q[0].value+q[0].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"：<br/>"+D[0].value+D[0].unit+'</div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[1].name+"：<br/>"+q[1].value+q[1].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"：<br/>"+D[1].value+D[1].unit+'</div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+q[2].name+"：<br/>"+q[2].value+q[2].unit+'</div></div><div class="item"><div class="content-item">'+m.series[1].name+"：<br/>"+D[2].value+D[2].unit+"</div></div></div><div>"}else setTimeout(function(){var e=screen.height,t=$(".mobile-content").height();p<1200&&($(".mobile-content").css({"min-height":e+"px"}),t<=e&&(e>980?($(".mobile-content .content-main").css({"min-height":e-50+"px"}),$(".mobile-content .graph>div").css({height:e/$(".mobile-content .content-box").length-20-44-50+"px"})):($(".mobile-content .content-main").css({"min-height":e-50+"px"}),$(".mobile-content .graph>div").css({"min-height":e-50-40-46-2-10+"px"})))),l=echarts.init(a.find("div")[0]),l.clear(),l.resize(),l.setOption(s)},600);n.onResize=function(){l&&(l.clear(),l.resize(),l.setOption(s))},angular.element(t).bind("resize",function(){n.onResize()})}})}n.$watch("content.model",function(e,t){e!==t&&e&&t&&r()}),n.$watch("content.quarter",function(e,t){e!==t&&e&&t&&r()});var l=null,s={};r()}}}])}(),function(){var e=angular.module("app.main.module.content.ecocity",["ui.bootstrap","cgBusy"]);e.controller("ecocityController",["$scope","ecocityService","$stateParams","$rootScope","$sce",function(e,t,n,a,o){a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),t.getContent({menuId:n.pid}).then(function(n){var a=n.data[0],o=a.picCode,i=a.url;i=i+"/"+o,t.getContentDatas(i).then(function(t){var n=t.data;e.indicatorDatas=n.data,angular.forEach(n.data,function(t,n,a){"地区生产总值"==t.indicator_name&&(e.indicatorFirst=t)});var a=screen.width;a>1200&&$(".eco_footer").mCustomScrollbar()})}),e.trusted={},e.detailInfo=function(t){var n="<p>"+t.indicator_name+"</p><div>目标总量："+t.yearly_target+"</div><div>完成总量："+t.current_quarter_achieved+"</div><div>目标增速："+t.yearly_target_growth+"%</div><div>实际增速："+t.current_quarter_actual_growth+"%</div><div>增速状态："+t.growth_status+"%</div><div>增速评价："+t.schedule_evaluation+"</div>";return e.trusted[n]||(e.trusted[n]=o.trustAsHtml(n))}}]),e.factory("ecocityService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}return{getContent:n,getContentDatas:a}}])}(),function(){var e=angular.module("app.main.module.content.ecocounty",["ui.bootstrap","cgBusy"]);e.controller("ecocountyController",["$scope","ecocountyService","$stateParams","$rootScope",function(e,t,n,a){function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function i(){t.getContentDatasUrl(e.url,{year:o(e.datepick.model,"yyyy"),quarter:e.datepick.quarter,indicator_name:e.show}).then(function(t){var n=t.data;e.indicatorDatas=n.data}),console.log(11),console.log(e.url)}a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.popups=[],e.quarterOptions=[{id:1,name:"第一季度"},{id:2,name:"第二季度"},{id:3,name:"第三季度"},{id:4,name:"第四季度"}],e.datepick={},e.datepick.format="yyyy",e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){return!angular.isDate(e.datepick.model)||isNaN(e.datepick.model.getTime())?void alert("请输入正确的日期格式！"):e.datepick.quarter?void 0:void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],t.getContent({menuId:n.pid}).then(function(n){_.forEach(n.data,function(n){e.url=n.url+"/"+n.picCode,t.getContentDatas(e.url).then(function(t){if("ecnomicalIndicatorsTitles"==n.picCode&&(e.listMenu=t.data),"ecnomicalIndicators"==n.picCode){var a=t.data;e.indicatorDatas=a.data,e.datepick.model=new Date(a.year),e.datepick.quarter=Number(a.quarter),e.show=a.indicator_name;var o=screen.width;o>1200&&$(".tb-wrap").mCustomScrollbar()}})})}),e.$watch("datepick.model",function(e,t){e!==t&&e&&t&&i()},!0),e.$watch("datepick.quarter",function(e,t){e!==t&&e&&t&&i()},!0),e.display=function(t){e.show=t,i()},Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("ecocountyService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}function o(n,a){return e.get(t+n,{params:a})}return{getContent:n,getContentDatas:a,getContentDatasUrl:o}}])}(),function(){var e=angular.module("app.main.module.content.ecogdp",["ui.bootstrap","cgBusy"]);e.controller("ecogdpController",["$scope","ecogdpService","$stateParams","$rootScope","$sce",function(e,t,n,a,o){a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),t.getContent({menuId:n.pid}).then(function(n){var a=n.data[0],o=a.picCode,i=a.url;i=i+"/"+o,t.getContentDatas(i).then(function(t){var n=t.data;e.indicatorDatas=n;var a=screen.width;a>1200&&$(".eco_gdp").mCustomScrollbar()})}),e.trusted={},e.detailInfo=function(t){var n="<p>"+t.indicator_name+"</p><div>目标总量："+t.yearly_target+"</div><div>完成总量："+t.current_quarter_achieved+"</div><div>目标增速："+t.yearly_target_growth+"%</div><div>实际增速："+t.current_quarter_actual_growth+"%</div><div>增速状态："+t.growth_status+"%</div><div>增速评价："+t.schedule_evaluation+"</div>";return e.trusted[n]||(e.trusted[n]=o.trustAsHtml(n))}}]),e.factory("ecogdpService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}return{getContent:n,getContentDatas:a}}])}(),function(){var e=angular.module("app.main.module.content.goalprogress",["ui.bootstrap","cgBusy"]);e.controller("goalprogressController",["$scope","goalprogressService","$stateParams","uibDateParser","$rootScope",function(e,t,n,a,o){function i(n){_.forEach(e.alldatas,function(a){var o=a.url+"/"+a.picCode;t.getContentDatas(o,n).then(function(n){"cityYearlyTargetSchedule"==a.picCode&&(e.cityQuarterData=n.data),"cityQuarterlyTargetSchedule"==a.picCode&&(e.cityYearData=n.data,e.cityYearData.url=o,e.datepick.model=new Date(e.cityYearData.year),e.datepick.year=t.getDateFormat(e.datepick.model,"yyyy"),e.datepick.quarter=Number(e.cityYearData.quarter))})})}o.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.quarterOptions=[{id:1,name:"第一季度"},{id:2,name:"第二季度"},{id:3,name:"第三季度"},{id:4,name:"第四季度"}],e.datepick={},e.datepick.format="yyyy",e.datepick.model=new Date,e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){return!angular.isDate(e.datepick.model)||isNaN(e.datepick.model.getTime())?void alert("请输入正确的日期格式！"):e.datepick.quarter?void i({year:t.getDateFormat(e.datepick.model,"yyyy"),quarter:e.datepick.quarter}):void alert("请选择季度！")},e.qtchanged=function(){return!angular.isDate(e.datepick.model)||isNaN(e.datepick.model.getTime())?void alert("请输入正确的日期格式！"):e.datepick.quarter?void _.forEach(e.alldatas,function(n){var a=n.url+"/"+n.picCode;"cityQuarterlyTargetSchedule"==n.picCode&&t.getContentDatas(a,{year:e.datepick.year,quarter:e.datepick.quarter}).then(function(t){e.cityYearData=t.data,e.cityYearData.url=a,e.datepick.model=new Date(e.cityYearData.year),e.datepick.quarter=Number(e.cityYearData.quarter)})}):void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],t.getContent({menuId:n.pid}).then(function(t){e.alldatas=t.data,i()}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("goalprogressService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}return{getContent:n,getContentDatas:a,getDateFormat:o}}]),e.directive("wiservGoalProgress",["goalprogressService","$window",function(e,t){return{restrict:"ACE",scope:{yearlydata:"=",datemodel:"="},template:"<div style='width:100%;height:100%'></div>",link:function(e,t,n){function a(){if(e.yearlydata){var n=[],a=[];e.datemodel.quarter=Number(e.datemodel.quarter),_.forEach(e.yearlydata.data.value,function(e){"nomal"==e.name&&(n=e.data),"delay"==e.name&&(a=e.data)});var o=screen.width,i={title:{text:"全市目标任务进度",left:"center",top:"4%"},color:["rgb(49,167,229)","rgb(40,200,202)"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["进度正常","进度滞后"],top:"13%",itemGap:50},grid:{top:"26%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisLabel:{interval:0,formatter:function(e){var t="";if(o<1024){var n=e.length;if(n>4){var a="",i="";a=e.substring(0,n-3),i=e.substring(n-3),t=a+"\n"+i}else t=e}else t=e;return t}},data:e.yearlydata.data.area}],yAxis:[{type:"value",name:"项",nameGap:8}],series:[{name:"进度正常",type:"bar",barMaxWidth:"50%",stack:"纳入本月",data:n,label:{normal:{show:!0}}},{name:"进度滞后",type:"bar",barMaxWidth:"50%",stack:"纳入本月",data:a,label:{normal:{show:!0}}}]};setTimeout(function(){var e=echarts.init(t.find("div")[0]);e.clear(),e.resize(),e.setOption(i)},300)}}e.$watch("yearlydata",function(e,t){e!==t&&e&&t&&a()},!0),a()}}}]),e.directive("wiservGoalRate",["goalprogressService","$window",function(e,t){return{restrict:"ACE",scope:{quarterlydata:"=",datemodel:"="},template:"<div style='width:100%;height:100%'></div>",link:function(e,t,n){function a(){if(e.quarterlydata){_.forEach(e.quarterlydata.value,function(e){1==e.quarter&&(e.name="第一季度"),2==e.quarter&&(e.name="第二季度"),3==e.quarter&&(e.name="第三季度"),4==e.quarter&&(e.name="第四季度"),e.type="line",e.label={normal:{show:!0}}});var n=screen.width,a=50,o="26%";n<1024&&(a=10,o="34%");var i={title:{text:e.datemodel.year+"年全市目标工作正常推进率",left:"center",top:"4%"},color:["rgb(49,167,229)","rgb(40,200,202)","rgb(221,129,142)","rgb(97,160,168)"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){console.log(e);var t=e[0].name+"<br/>";return _.forEach(e,function(e){var n=""==e.value?e.value:parseFloat(e.value);t+=e.seriesName+":"+n+"<br/>"}),t}},legend:{data:_.map(e.quarterlydata.value,"name"),top:"13%",itemGap:a},grid:{top:o,left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisLabel:{interval:0,formatter:function(e){var t="";if(n<1024){var a=e.length;if(a>4){var o="",i="";o=e.substring(0,a-3),i=e.substring(a-3),t=o+"\n"+i}else t=e}else t=e;return t}},data:e.quarterlydata.area}],yAxis:[{type:"value",name:"%",nameGap:8}],series:e.quarterlydata.value};setTimeout(function(){var e=echarts.init(t.find("div")[0]);e.clear(),e.resize(),e.setOption(i)},300)}}e.$watch("quarterlydata",function(e,t){e!==t&&e&&t&&a()},!0),a()}}}])}(),function(){var e=angular.module("app.main.module.content.goalquater",["ui.bootstrap","cgBusy","slick"]);e.controller("goalquaterController",["$scope","goalquaterService","$stateParams","$rootScope","$timeout",function(e,t,n,a,o){function i(n){e.awardedUnits=null,e.penalUnits=null,_.forEach(e.alldatas,function(a){var i=a.url+"/"+a.picCode;t.getContentDatas(i,n).then(function(t){"targetExamTotalRanks"==a.picCode&&(e.targetExamTotalRanks=t.data),"targetExamRanks"==a.picCode&&(e.targetExamRanks=t.data,e.targetExamRanks.url=i,e.datepick.model=new Date(e.targetExamRanks.year),e.datepick.quarter=e.targetExamRanks.quarter?Number(e.targetExamRanks.quarter):""),"penalUnits"==a.picCode&&(e.penalUnits=t.data,e.penlTotal=0),"awardedUnits"==a.picCode&&o(function(){e.awardedUnits=t.data,e.awardedTotal=0})})})}a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.quarterOptions=[{id:1,name:"第一季度"},{id:2,name:"第二季度"},{id:3,name:"第三季度"},{id:4,name:"第四季度"}],e.datepick={},e.datepick.format="yyyy",e.datepick.model=new Date,e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){if(angular.isDate(e.datepick.model)&&!isNaN(e.datepick.model.getTime()))return e.datepick.quarter?void i({year:t.getDateFormat(e.datepick.model,"yyyy"),quarter:e.datepick.quarter}):void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],t.getContent({menuId:n.pid}).then(function(t){e.alldatas=t.data,i()}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("goalquaterService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}return{getContent:n,getContentDatas:a,getDateFormat:o}}]),e.directive("wiservGoalQuater",["goalquaterService","$window",function(e,t){return{restrict:"ACE",scope:{quaterdata:"=",datemodel:"="},template:"<div style='width:100%;height:100%'></div>",link:function(e,n,a){function o(){function t(e){var t=angular.copy(e);return _.forEach(t,function(e){var t=_.max(e.value),n=[],a=[];_.forEach(e.value,function(e){""!=e?(n.push(1+Number(t)-Number(e)),a.push(e)):(n.push(e),a.push(e))}),e.value=n,e.ranks=a}),t}if(e.quaterdata&&e.quaterdata.area){var a=e.quaterdata.area,o=[];_.forEach(a,function(e){var t={};t.name=e,t.min=1,t.max=a.length,o.push(t)});var r=t(e.quaterdata.data),l=_.map(r,"name");e.datemodel.quarter=Number(e.datemodel.quarter);var s=0,c=screen.width,m=["60%","54%"],u="65%",d="vertical",p="10%",f=18,h=25,g=5,v=10;c<1400&&(v=5),c<1200&&(m=["32%","40%"],u="40%",d="horizontal",p="bottom",f=16,h=35,g=[15,10,0,10]);var y={title:{left:"center",text:e.quaterdata.year+"年第"+e.datemodel.quarter+"季度 目标任务考核分项名次",textStyle:{fontSize:f},top:-2},tooltip:{formatter:function(e){var t=e.name+"<br/>",n=[];return _.forEach(a,function(t,a){var o={};o.name=t,o.rank=e.data.ranks[a],n.push(o)}),n=_.sortBy(n,"rank"),_.forEach(n,function(e){t+=e.name+":"+e.rank+"<br/>"}),t}},legend:{left:"left",top:p,orient:d,data:l,itemWidth:h,itemGap:v,padding:g},radar:{center:m,name:{textStyle:{color:"#333"}},radius:u,nameGap:8,indicator:o,axisLabel:{show:!1,formatter:function(e){if(s++,s<=6)return e}}},series:[{name:"目标任务考核",type:"radar",symbol:"line",data:r}]};setTimeout(function(){i=echarts.init(n.find("div")[0]),i.clear(),i.resize(),i.setOption(y)},300)}}var i=null;e.$watch("quaterdata",function(e,t){e!==t&&e&&t&&o()}),o(),e.onResize=function(){i&&i.resize()},angular.element(t).bind("resize",function(){e.onResize()})}}}])}(),function(){var e=angular.module("app.main.module.content.goalyear",["ui.bootstrap","cgBusy","angular-carousel"]);e.controller("goalyearController",["$scope","goalyearService","$stateParams","$rootScope",function(e,t,n,a){function o(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function i(n,a){t.getContentDatas(n,a).then(function(t){e.indicatorDatas=t.data.data,e.datepick.model=new Date(t.data.year),_.forEach(e.indicatorDatas,function(t){"county"==t.area&&(e.countyDatas=t.data),"party"==t.area&&(e.partyDatas=t.data),"gov"==t.area&&(e.govDatas=t.data),"center"==t.area&&(e.centerDatas=t.data),"foreign"==t.area&&(e.foreignDatas=t.data);var n=screen.width;n>1200&&$(".y-item").mCustomScrollbar()})})}a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.datepick={},e.datepick.format="yyyy",e.datepick.model=new Date,e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){angular.isDate(e.datepick.model)&&!isNaN(e.datepick.model.getTime())&&i(e.url,{year:o(e.datepick.model,"yyyy")})},t.getContent({menuId:n.pid}).then(function(t){var n=t.data[0],a=n.picCode,o=n.url;e.url=o+"/"+a,i(e.url)}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("goalyearService",["$http","URL",function(e,t){
function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n,a){return e.get(t+n,{params:a})}return{getContent:n,getContentDatas:a}}])}(),function(){var e=angular.module("app.main.module.content.proceeding",["ui.bootstrap","cgBusy"]);e.controller("proceedingController",["$scope","proceedingService","$stateParams","$rootScope","$sce",function(e,t,n,a,o){a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),t.getContent({menuId:n.pid}).then(function(n){e.alldatas=n.data,_.forEach(n.data,function(n){var a=n.url+"/"+n.picCode;t.getContentDatas(a).then(function(t){"businessSupervisionByMonth"==n.picCode&&(e.bsMonth=t.data,_.forEach(e.bsMonth.data,function(t){switch(t.indicator_name){case"本月新增督办事项":e.bs_increased=Number(t.item_number);break;case"本月继续督办事项":e.bs_going=Number(t.item_number);break;case"历史逾期未办结事项":e.bs_history=Number(t.item_number);break;case"本月应办结事项":e.should_do=Number(t.item_number);break;case"本月应办结事项办结数":e.done_num=Number(t.item_number);break;case"历史逾期事项本月办结数":e.done_history=Number(t.item_number);break;case"本月逾期未办结事项数":e.delay_num=Number(t.item_number);break;case"历史逾期事项本月未办结":e.delay_history=Number(t.item_number)}})),"businessSupervisionQuarterly"==n.picCode&&(e.quarter_data=t.data,_.forEach(e.quarter_data,function(e){1==e.quarter&&(e.quarter="一"),2==e.quarter&&(e.quarter="二"),3==e.quarter&&(e.quarter="三"),4==e.quarter&&(e.quarter="四")})),"businessSupervisionYearly"==n.picCode&&(e.yearData=t.data)})})}),e.trusted={},e.bsDetail=function(t,n,a){var i="<p>本月督办详情</p><div>本月新增："+t+"</div><div>继续督办："+n+"</div><div>历史逾期未办结："+a+"%</div>";return e.trusted[i]||(e.trusted[i]=o.trustAsHtml(i))},e.shouldDetail=function(t){var n="<p>本月应办详情</p><div>本月应办："+t+"</div>";return e.trusted[n]||(e.trusted[n]=o.trustAsHtml(n))},e.doneDetail=function(t,n){var a="<p>本月实际办结详情</p><div>完成本月应办结："+t+"</div><div>完成历史逾期："+n+"</div>";return e.trusted[a]||(e.trusted[a]=o.trustAsHtml(a))},e.delayDetail=function(t,n){var a="<p>本月逾期未办结详情</p><div>本月逾期："+t+"</div><div>历史逾期："+n+"</div>";return e.trusted[a]||(e.trusted[a]=o.trustAsHtml(a))}}]),e.factory("proceedingService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}return{getContent:n,getContentDatas:a}}]),e.directive("wiservTargetProcnum",["proceedingService","$window",function(e,t){return{restrict:"ACE",scope:{numdata:"="},template:"<div style='width:100%;height:100%'></div>",link:function(e,n,a){var o=[],i=null;_.forEach(e.numdata.value,function(e){"本月新增督办事项"!=e.name&&"本月继续督办事项"!=e.name&&"历史逾期未办结事项"!=e.name||(e.type="bar",e.barMaxWidth="50%",e.stack="纳入本月",o.push(e))});var r=screen.width,l="34%",s="19%";r<1024&&(l="40%",s="20%");var c={title:{text:"纳入各月督办事项数目",subtext:"数据来源：市委目督办",left:"center",top:"2%"},color:["rgb(49,167,229)","rgb(40,200,202)"],tooltip:{trigger:"axis",position:function(t,n,a){return.56*screen.width<$(a).outerWidth()?["20%","40%"]:n[0].dataIndex>=e.numdata.month.length/2?[t[0]-$(a).outerWidth(),"40%"]:[t[0],"40%"]}},legend:{data:_.map(o,"name"),top:s,itemGap:8,padding:0,itemWidth:14,itemHeight:14,borderWidth:0},grid:{top:l,left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisLabel:{interval:0,formatter:function(e,t){return r<1200&&t%2!=0&&(e="\n"+e),e}},data:e.numdata.month}],yAxis:[{type:"value",name:"项",nameGap:8}],series:o};setTimeout(function(){i=echarts.init(n.find("div")[0]),i.clear(),i.resize(),i.setOption(c)},300),e.onResize=function(){i&&i.resize()},angular.element(t).bind("resize",function(){e.onResize()})}}}]),e.directive("wiservTargetProcrate",["proceedingService","$window",function(e,t){return{restrict:"ACE",scope:{ratedata:"="},template:"<div style='width:100%;height:100%'></div>",link:function(e,n,a){var o=[],i=null;_.forEach(e.ratedata.value,function(e){"纳入各月督办事项办结率"==e.name&&(o=e.data)});var r=screen.width,l={title:{text:"纳入各月督办事项办结率",subtext:"数据来源：市委目督办",left:"center",top:"2%"},color:["rgb(49,167,229)","rgb(40,200,202)"],tooltip:{trigger:"axis",position:function(t,n,a){return.56*screen.width<$(a).outerWidth()?["20%","40%"]:n[0].dataIndex>=e.ratedata.month.length/2?[t[0]-$(a).outerWidth(),"40%"]:[t[0],"40%"]}},legend:{data:["办结率"],top:"19%",itemGap:50},grid:{top:"34%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisLabel:{interval:0,formatter:function(e,t){return r<1200&&t%2!=0&&(e="\n"+e),e}},data:e.ratedata.month}],yAxis:[{type:"value",name:"%",nameGap:8}],series:[{name:"办结率",type:"line",data:o,label:{normal:{show:!0}}}]};setTimeout(function(){i=echarts.init(n.find("div")[0]),i.clear(),i.resize(),i.setOption(l)},600),e.onResize=function(){i&&i.resize()},angular.element(t).bind("resize",function(){e.onResize()})}}}])}(),function(){var e=angular.module("app.main.module.content.projectcity",["ui.bootstrap","cgBusy"]);e.controller("projectcityController",["$scope","projectcityService","$stateParams","$rootScope","$sce",function(e,t,n,a,o){function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(){console.log(e.url),t.getContentDatasUrl(e.url2,{year:i(e.datepick.model,"yyyy"),quarter:e.datepick.quarter}).then(function(t){var n=t.data,a=n.summary_index;e.indicatorDatas=n.data,e.allCityData=n.data[a-1],console.log(e.allCityData)})}a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.popups=[],e.quarterOptions=[{id:1,name:"第一季度"},{id:2,name:"第二季度"},{id:3,name:"第三季度"},{id:4,name:"第四季度"}],e.datepick={},e.datepick.format="yyyy",e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){return!angular.isDate(e.datepick.model)||isNaN(e.datepick.model.getTime())?void alert("请输入正确的日期格式！"):e.datepick.quarter?void 0:void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],t.getContent({menuId:n.pid}).then(function(n){_.forEach(n.data,function(n){var a=n.url+"/"+n.picCode;t.getContentDatas(a).then(function(t){if("cityScheduleIndicatorsSummary"==n.picCode,"cityScheduleIndicators"==n.picCode){e.url2=a;var o=t.data;e.indicatorDatas=o.data,e.datepick.model=new Date(o.year),e.datepick.quarter=Number(o.quarter);var i=o.summary_index;e.allCityData=o.data[i-1];var r=screen.width;r>1200&&$(".eco_footer").mCustomScrollbar()}})})}),e.trusted={},e.detailInfo=function(t){var n="<p>"+t.area+"</p><div>年目标（亿元）："+t.yearly_argetTotal+"</div><div>季目标（亿元）："+t.quarterly_target+"</div><div>年进度："+t.yearly_investment_achieved_rate+"%</div><div>季进度："+t.quarter_investment_processing+"%</div><div>滞后项目数（个）："+t.delayed_project_number+"</div>";return e.trusted[n]||(e.trusted[n]=o.trustAsHtml(n))},e.$watch("datepick.model",function(e,t){e!==t&&e&&t&&r()},!0),e.$watch("datepick.quarter",function(e,t){console.log(e),console.log(t),e!==t&&e&&t&&r()},!0),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("projectcityService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}function o(n,a){return e.get(t+n,{params:a})}return{getContent:n,getContentDatas:a,getContentDatasUrl:o}}])}(),function(){var e=angular.module("app.main.module.content.projectcounty",["ui.bootstrap","cgBusy"]);e.controller("projectcountyController",["$scope","projectcountyService","$stateParams","$rootScope","$sce",function(e,t,n,a,o){function i(e,t){var n=angular.copy(e);return angular.isDate(n)&&!isNaN(n.getTime())?n.Format(t):""}function r(){console.log(e.url),t.getContentDatasUrl(e.url2,{year:i(e.datepick.model,"yyyy"),quarter:e.datepick.quarter}).then(function(t){var n=t.data,a=n.summary_index;e.indicatorDatas=n.data,e.allCityData=n.data[a-1],console.log(e.allCityData)})}a.mname=n.mname,setTimeout(function(){$(".menu-label").removeClass("m-collapse")},600),e.popups=[],e.quarterOptions=[{id:1,name:"第一季度"},{id:2,name:"第二季度"},{id:3,name:"第三季度"},{id:4,name:"第四季度"}],e.datepick={},e.datepick.format="yyyy",e.datepick.dateOptions={},e.datepick.dateOptions.minMode="year",e.datepick.dateOptions.datepickerMode="year",e.open=function(){e.datepick.opened=!0},e.changed=function(){return!angular.isDate(e.datepick.model)||isNaN(e.datepick.model.getTime())?void alert("请输入正确的日期格式！"):e.datepick.quarter?void 0:void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],t.getContent({menuId:n.pid}).then(function(n){_.forEach(n.data,function(n){var a=n.url+"/"+n.picCode;t.getContentDatas(a).then(function(t){if("countyScheduleIndicatorsSummary"==n.picCode,"countyScheduleIndicators"==n.picCode){e.url2=a;var o=t.data;e.indicatorDatas=o.data,e.datepick.model=new Date(o.year),e.datepick.quarter=Number(o.quarter);var i=o.summary_index;e.allCityData=o.data[i-1];var r=screen.width;r>1200&&$(".eco_footer").mCustomScrollbar()}})})}),e.trusted={},e.detailInfo=function(t){var n="<p>"+t.area+"</p><div>年目标（亿元）："+t.yearly_argetTotal+"</div><div>季目标（亿元）："+t.quarterly_target+"</div><div>年进度："+t.yearly_investment_achieved_rate+"%</div><div>季进度："+t.quarter_investment_processing+"%</div><div>滞后项目数（个）："+t.delayed_project_number+"</div>";return e.trusted[n]||(e.trusted[n]=o.trustAsHtml(n))},e.$watch("datepick.model",function(e,t){e!==t&&e&&t&&r()},!0),e.$watch("datepick.quarter",function(e,t){console.log(e),console.log(t),e!==t&&e&&t&&r()},!0),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}]),e.factory("projectcountyService",["$http","URL",function(e,t){function n(n){return e.get(t+"/main/showPics",{params:n})}function a(n){return e.get(t+n)}function o(n,a){return e.get(t+n,{params:a})}return{getContent:n,getContentDatas:a,getContentDatasUrl:o}}])}();