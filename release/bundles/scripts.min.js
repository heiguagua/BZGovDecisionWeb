!function(){function e(e,t,a){function n(e,t){return{request:function(e){screen.width,screen.height,.7*$(".content-box").height()+"px";return e},requestError:function(e){return e},response:function(t){return e.when(t,function(e){}),t},responseError:function(e){return e}}}t.otherwise("/dashboard"),e.state("dashboard",{url:"/dashboard",templateUrl:"partials/dashboard/view.html",controller:"dashboardController",controllerAs:"dashboard"}).state("profile",{url:"/profile",templateUrl:"partials/profile/view.html",controller:"profileController",controllerAs:"profile"}).state("profile.menu",{url:"/menu",templateUrl:"partials/profile/menu/view.html",controller:"menuController",controllerAs:"menu"}).state("profile.eco",{url:"/eco/:proid",templateUrl:"partials/profile/eco/view.html",controller:"ecoController",controllerAs:"eco"}).state("profile.industry",{url:"/industry/:proid",templateUrl:"partials/profile/industry/view.html",controller:"industryController",controllerAs:"industry"}).state("profile.agri",{url:"/agri/:proid",templateUrl:"partials/profile/agri/view.html",controller:"agriController",controllerAs:"agri"}).state("profile.service",{url:"/service/:proid",templateUrl:"partials/profile/service/view.html",controller:"serviceController",controllerAs:"service"}).state("profile.travel",{url:"/travel/:proid",templateUrl:"partials/profile/travel/view.html",controller:"travelController",controllerAs:"travel"}).state("main",{url:"/main/:mid/:typeid/:murl",templateUrl:"partials/main/view.html",controller:"mainController",controllerAs:"main"}).state("login",{url:"/login",templateUrl:"partials/login/view.html",controller:"loginController",controllerAs:"login"}).state("main.preview",{url:"/preview/:preid",templateUrl:"partials/preview/view.html",controller:"previewController",controllerAs:"preview"}).state("main.module",{url:"/module/:id/:url",templateUrl:"partials/module/view.html",controller:"moduleController",controllerAs:"module"}).state("main.file",{url:"/file/:furl",templateUrl:"partials/file/view.html",controller:"fileController",controllerAs:"file"}).state("main.module.content",{url:"/content/:tid",templateUrl:"partials/module/content/view.html",controller:"contentController",controllerAs:"content"}).state("main.module.content.detail",{url:"/detail/:pid",templateUrl:"partials/module/content/detail/view.html",controller:"detailController",controllerAs:"detail"}),a.interceptors.push(n),n.$inject=["$q","$location"]}angular.module("app",["ui.router","common.http","app.dashboard","app.login","app.main","app.profile","app.profile.menu","app.profile.eco","app.profile.industry","app.profile.agri","app.profile.service","app.profile.travel","app.file","app.main.preview","app.main.module","app.main.module.content","app.main.module.content.detail"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"]}(),function(){var e=angular.module("common.http",[]);e.constant("URL",location.protocol+"//"+location.host+"/govDecisionServer"),e.factory("validate",[function(){return function(e,t){var a=function(t){return e&&e.head&&e.head.status===t};switch(t){case 200:return a(t);case 201:return a(t);case 202:return a(t);case 400:return a(t);case 404:return a(t);case 405:return a(t);case 415:return a(t);case 500:return a(t)}}}])}(),function(){var e=angular.module("app.dashboard",[]);e.$inject=["$location"],e.controller("dashboardController",["$scope","dashboardService","$state",function(e,t,a){var n=this;e.chartlist=[],t.getMenus({parentId:"0"}).then(function(e){n.menus=e.data,n.menus&&n.menus[0]&&n.menus[0].id&&a.go("profile")})}]),e.factory("dashboardService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,getEcoData:o}}])}(),function(){var e=angular.module("app.file",[]);e.controller("fileController",["$scope","fileService","$state","$stateParams","$uibModal","URL",function(e,t,a,n,i,r){function o(){t.getFileList(n.furl,{fileType:"pdf",offset:(l.Paging.currentPage-1)*l.Paging.itemsPerPage,limit:l.Paging.itemsPerPage}).then(function(e){l.fileList=e.data.data,l.Paging.totalItems=e.data.total})}var l=this;e.Modal={},l.Paging={},l.Paging.currentPage=1,l.Paging.maxSize=5,l.Paging.itemsPerPage=10,o(),l.showDetail=function(t,a){var n=i.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"fileDetail.html",scope:e,size:"lg"});e.file_url=r+t+"?id="+a,e.Modal.close=function(){n.close()}},l.Paging.pageChanged=function(){o()}}]),e.filter("trustUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),e.factory("fileService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}return{getMenus:a,getFileList:n}}])}(),function(){var e=angular.module("app.login",["ngCookies"]);e.controller("loginController",["$rootScope","$cookies","$scope","$state","loginService",function(e,t,a,n,i){sessionStorage.token&&sessionStorage.removeItem("token"),sessionStorage.message&&(a.alerts=[{type:"danger",msg:sessionStorage.message}],a.closeAlert=function(e){a.alerts.splice(e,1)},sessionStorage.removeItem("message")),a.Login={},a.Login.submit=function(r){if(console.log(r),a.loginSubmitted=!1,r){var o=a.Login.username,l=hex_md5(a.Login.password);i.login({username:o,password:l}).then(function(i){var r=i.data.body[0];e.User=r,t.put("User",JSON.stringify(r)),console.log(JSON.stringify(r));var o=i.data.head.token;o&&(sessionStorage.token=o),200==i.data.head.status?n.go("main.preview"):a.loginError=!0})}else a.loginSubmitted=!0}}]),e.factory("loginService",["$http","URL",function(e,t){function a(a){return e.post(t+"/login",{data:a})}return{login:a}}])}(),function(){var e=angular.module("app.main",[]);e.controller("mainController",["$scope","mainService","$state","$stateParams",function(e,t,a,n){var i=this;i.showMenu=function(){$(".side-nav").toggleClass("sidebar-collapse"),$(".m-header").toggleClass("sidebar-collapse"),$(".main-content").toggleClass("sidebar-collapse")},t.getMenus({parentId:"0"}).then(function(e){i.menus=e.data,_.forEach(i.menus,function(e,t){e&&"3"==e.type&&i.menus.splice(t,1)}),a.go("main.module",{id:n.mid})})}]),e.factory("mainService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}return{getMenus:a}}])}(),function(){var e=angular.module("app.main.module",[]);e.controller("moduleController",["$scope","moduleService","$stateParams","$state",function(e,t,a,n){var i=this;""!=a.url||t.getMenuTabs({parentId:a.id}).then(function(e){i.menuTabs=e.data,i.menuTabs&&i.menuTabs[0]&&i.menuTabs[0].id&&n.go("main.module.content",{tid:i.menuTabs[0].id})}),i.toggleMenus=function(){$(".menu-tabs").toggleClass("m-collapse")},i.toggleSecMenus=function(){$(".menu-label").toggleClass("m-collapse")}}]),e.factory("moduleService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}return{getMenuTabs:a}}])}(),function(){var e=angular.module("app.main.preview",["ui.bootstrap"]);e.controller("previewController",["$scope","previewService","$stateParams","$state",function(e,t,a,n){var i=this;e.chartlist=[],t.getContent({menuId:a.preid}).then(function(t){i.content=_.sortBy(t.data,["picCode"]),_.forEach(i.content,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.chartlist.push(a)})}),t.getEcoData({picCode:7117}).then(function(e){i.ecoData=e.data}),t.getEcoData({picCode:7118}).then(function(e){i.ecoDataDown=e.data}),e.open=function(t){e.chartlist[t].opened=!0},e.changed=function(t){if(!angular.isDate(e.chartlist[t].model)||isNaN(e.chartlist[t].model.getTime()))return void alert("请输入正确的日期格式！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}}]),e.factory("previewService",["$http","URL",function(e,t){function a(a,n){return e.get(t+a,{params:n})}function n(a){return e.get(t+"/main/showPics",{params:a})}function i(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function r(a){return e.get(t+"/identity/table",{params:a})}return{getDetail:a,getContent:n,getDateFormat:i,getEcoData:r}}]),e.directive("wiservChartEtotal",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{econtent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.econtent&&a.econtent.url&&e.getDetail(a.econtent.url,{queryTime:e.getDateFormat(a.econtent.model,a.econtent.format),picCode:a.econtent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.econtent.model||""==i.init_query_time||(a.econtent.model=new Date(i.init_query_time)),a.econtent.query_time=i.init_query_time;var o={};o.formatYear="yyyy","year"==i.time_scope&&(a.econtent.format="yyyy",o.minMode="year",o.datepickerMode="year"),"month"==i.time_scope&&(a.econtent.format="yyyy-MM",o.minMode="month",o.datepickerMode="month"),a.econtent.dateOptions=o,a.econtent.dep_name=i.dep_name;var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+i.y_name[0]+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:i.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+i.y_name[0]},textStyle:{color:"#333"}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#FFF"}},data:i.series[0].data},{name:i.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"\n";else t=e.data.name+":"+e.data.value+"\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}}},radius:["25%","50%"],data:i.series[1].data}]},c=screen.width;c<1600&&(s.series[1].labelLine={normal:{length:6,length2:4}}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(s)},400),a.onResize1=function(){r&&r.resize()},angular.element(t).bind("resize",function(){a.onResize1()})}})}}}]),e.directive("wiservChartIncrease",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{icontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.icontent&&a.icontent.url&&e.getDetail(a.icontent.url,{queryTime:e.getDateFormat(a.icontent.model,a.icontent.format),picCode:a.icontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.icontent.query_time=i.init_query_time,a.icontent.dep_name=i.dep_name;var o=["rgb(0,204,200)","rgb(232,175,64)","rgb(0,168,228)"],l={color:o,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+e.data.unit+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:i.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return"\n"+e.data.name+"\n"+e.data.value+e.data.unit+"\n"},textStyle:{color:"#333"}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#FFF"}},data:i.series[0].data},{name:i.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+"\n"+e.data.other[a].value+e.data.other[a].unit+"\n";else t=e.data.name+"\n"+e.data.value+e.data.unit+"\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}}},radius:["25%","50%"],data:i.series[1].data}]},s=screen.width;s<1600&&(l.series[1].labelLine={normal:{length:10,length2:8}}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(l)},400),a.onResize2=function(){r&&r.resize()},angular.element(t).bind("resize",function(){a.onResize2()})}})}}}]),e.directive("wiservChartInvest",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{vcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.vcontent&&a.vcontent.url&&e.getDetail(a.vcontent.url,{queryTime:e.getDateFormat(a.vcontent.model,a.vcontent.format),picCode:a.vcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.vcontent.query_time=i.init_query_time,a.vcontent.dep_name=i.dep_name;var o={},l={};i.dataItems&&i.dataItems[0]&&(o=i.dataItems[0]),i.dataItems&&i.dataItems[1]&&(l=i.dataItems[1]);var s=["rgb(232, 215, 64)","rgb(154, 253, 138)","rgb(14, 83, 108)"],c=["rgb(0,168,228)","rgb(0,152,72)","rgba(14, 83, 108, 0.5)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.scale=!0,a.type="value",a.name=e,a.axisLabel={textStyle:{color:"#333"}},a.axisTick={},a.axisTick.inside=!0,a.splitLine={show:!0,interval:"auto"},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),e.label={normal:{show:!0,position:"top",textStyle:{color:"#333"}}}});var u=screen.width,d=0,m="24%",h="10%";u<1600&&(d="auto",m="32%",h="16%");var p={color:c,title:{text:o.name+"："+o.value+o.unit,subtext:l.name+"："+l.value+l.unit,textStyle:{fontSize:12,color:"#333"},subtextStyle:{fontSize:12,color:"#333",fontWeight:"border"},itemGap:10,padding:4,borderColor:"#DDD",borderWidth:1},grid:{top:m,left:h,right:h,bottom:30},legend:{orient:"vertical",left:"right",data:i.legend,textStyle:{color:"#333",fontSize:14}},tooltip:{trigger:"axis"},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:s[2]}},axisLabel:{interval:d,textStyle:{fontSize:8,color:"#333"}},splitLine:{show:!0,interval:"auto",lineStyle:{color:s[3]}},splitArea:{show:!0,areaStyle:{color:s[4]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(p)},400),a.onResize3=function(){r&&r.resize()},angular.element(t).bind("resize",function(){a.onResize3()})}})}}}]),e.directive("wiservChartCpi",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{ccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.ccontent&&a.ccontent.url&&e.getDetail(a.ccontent.url,{queryTime:e.getDateFormat(a.ccontent.model,a.ccontent.format),picCode:a.ccontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.ccontent.dep_name=i.dep_name,a.ccontent.query_time=i.init_query_time;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c=0,u="24%",d="10%";s<1600&&(c="auto",u="32%",d="16%");var m=["rgb(255,169,34)","rgb(0,152,72)","rgb(0,168,228)"],h={color:m,tooltip:{trigger:"axis"},legend:{orient:"vertical",left:"right",data:i.legend,textStyle:{color:"#333",fontSize:14}},grid:{top:u,left:d,bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLabel:{interval:0,textStyle:{fontSize:8},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}}},yAxis:{type:"value",name:i.y_name,min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLabel:{formatter:"{value}"}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(h)},400),a.onResize4=function(){r&&r.resize()},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("wiservChartConsume",["previewService","$window",function(e,t){return{restrict:"ACE",scope:{scontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.scontent&&a.scontent.url&&e.getDetail(a.scontent.url,{queryTime:e.getDateFormat(a.scontent.model,a.scontent.format),picCode:a.scontent.picCode}).then(function(e){var i=e.data;if(a.scontent.query_time=i.init_query_time,a.scontent.dep_name=i.dep_name,i&&i.series){var o={},l={};i.dataItems&&i.dataItems[0]&&(o=i.dataItems[0]),i.dataItems&&i.dataItems[1]&&(l=i.dataItems[1]);var s=["rgb(107,217,95)","rgb(0,168,228)"],c={color:s,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+"<br/>";else t=e.data.name+":"+e.data.value+i.y_name[0]+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},title:{text:o.name+"："+o.value+o.unit,subtext:l.name+"："+l.value+l.unit,left:"right",textStyle:{fontSize:12},subtextStyle:{fontSize:12,color:"#333",fontWeight:"border"},itemGap:10,padding:4,borderColor:"#DDD",borderWidth:1},series:[{name:i.series[0].name,type:"pie",radius:"55%",center:["50%","50%"],startAngle:120,data:i.series[0].data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{normal:{label:{show:!0,formatter:function(e){var t="";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+"\n";else{var n=i.y_name[0]?i.y_name[0]:"";t=e.data.name+":"+e.data.value+n+"\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%")}return t}}}},labelLine:{show:!0,normal:{length:14,length2:8}}}]};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(c)},400),a.onResize5=function(){r&&r.resize()},angular.element(t).bind("resize",function(){a.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile",[]);e.$inject=["$location"],e.controller("profileController",["$scope","profileService","$state","$stateParams",function(e,t,a,n){var i=this;t.getMenus({parentId:"0"}).then(function(e){i.menus=e.data,i.cMenu=i.menus[1],_.forEach(i.menus,function(e){var t=e.name;switch(t){case"经济概况":e.profile_sref="profile.menu";break;case"经济形势分析":e.profile_sref="profile.eco";break;case"工业管理":e.profile_sref="profile.industry";break;case"农业管理":e.profile_sref="profile.agri";break;case"服务业管理":e.profile_sref="profile.service";break;case"旅游业管理":e.profile_sref="profile.travel"}}),i.menus&&i.menus[0]&&i.menus[0].id&&($(".profile").css({background:"url(assets/images/bg_profile.png)"}),a.go("profile.menu"))}),i.currentMenu=function(e){"3"==e.type?i.cMenu=i.menus[1]:i.cMenu=e}}]),e.factory("profileService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}return{getMenus:a}}])}(),function(){var e=angular.module("app.main.module.content",[]);e.controller("contentController",["$scope","contentService","$stateParams","$state",function(e,t,a,n){var i=this;t.getSubMenus({parentId:a.tid}).then(function(e){i.subMenus=e.data,i.subMenus&&i.subMenus[0]&&i.subMenus[0].id&&n.go("main.module.content.detail",{pid:i.subMenus[0].id})})}]),e.factory("contentService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}return{getSubMenus:a}}])}(),function(){var e=angular.module("app.profile.agri",[]);e.$inject=["$location"],e.controller("agriController",["$scope","agriService","$state","$stateParams","$window",function(e,t,a,n,i){var r=this;$(".profile").css({background:"url(assets/images/bg.png)"}),e.agrilist=[];var o=n.proid;t.getContent({menuId:o}).then(function(t){r.agricontent=_.sortBy(t.data,["picCode"]),_.forEach(r.agricontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.agrilist.push(a)})}),t.getagriData({picCode:3003}).then(function(e){r.agriData=e.data,$(".datalist").mCustomScrollbar()})}]),e.factory("agriService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,getagriData:o}}]),e.directive("agriChartRes",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{rescontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.rescontent&&a.rescontent.url&&e.getDetail(a.rescontent.url,{picCode:a.rescontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.rescontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="8%";s<1600&&(c="32%",u="10%");var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisTick={},a.axisTick.inside=!0,i.max_and_min&&i.max_and_min[t]){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,a.axisLine={onZero:!1,lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},a.axisLabel={},a.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},a.axisLabel.textStyle={color:d[5]},a.nameTextStyle={color:d[5]},a.splitLine={show:!0,interval:"auto",lineStyle:{color:d[3]}},a.splitArea={show:!0,areaStyle:{color:d[4]}},i.yAxis.push(a)}),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";(t+1)%2!=0&&(a="bottom"),e.label={normal:{show:!0,position:a}}});var m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:u,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("agriChartDistrict",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{districtcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.districtcontent&&a.districtcontent.url&&e.getDetail(a.districtcontent.url,{picCode:a.districtcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.districtcontent.dep_name=i.dep_name;var o=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;i.max_and_min&&(l=Math.round(i.max_and_min[0].minValue),s=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:o[5]},a.axisLabel={textStyle:{color:o[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:o[2]}},a.splitArea={show:!0,areaStyle:{color:o[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:o,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:d,right:"6%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:8,color:o[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:o[2]}},splitArea:{show:!0,areaStyle:{color:o[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize2=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize2()})}})}}}]),e.directive("agriChartFarm",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{farmcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.farmcontent&&a.farmcontent.url&&e.getDetail(a.farmcontent.url,{picCode:a.farmcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.farmcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:s[5]},a.axisLabel={textStyle:{color:s[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},a.splitArea={show:!0,areaStyle:{color:s[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:d,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:8,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize3=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize3()})}})}}}]),e.directive("agriChartWalnut",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{walnutcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.walnutcontent&&a.walnutcontent.url&&e.getDetail(a.walnutcontent.url,{picCode:a.walnutcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.walnutcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:s[5]},a.axisLabel={textStyle:{color:s[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},a.splitArea={show:!0,areaStyle:{color:s[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:d,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:8,color:s[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("agriChartFish",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{fishcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.fishcontent&&a.fishcontent.url&&e.getDetail(a.fishcontent.url,{picCode:a.fishcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.fishcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:s[5]},a.axisLabel={textStyle:{color:s[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:s[2]}},a.splitArea={show:!0,areaStyle:{color:s[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:s,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:d,right:"2%",bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:s[1],shadowColor:s[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:8,color:s[5]}},splitLine:{show:!0,interval:0,
lineStyle:{color:s[2]}},splitArea:{show:!0,areaStyle:{color:s[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize5=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile.eco",[]);e.$inject=["$location"],e.controller("ecoController",["$scope","ecoService","$state","$stateParams","$window",function(e,t,a,n,i){var r=this;$(".profile").css({background:"url(assets/images/bg.png)"}),e.chartlist=[];var o=n.proid;t.getContent({menuId:o}).then(function(t){r.dashcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.dashcontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.chartlist.push(a)})}),t.getEcoData({picCode:7117}).then(function(e){r.ecoData=e.data}),t.getEcoData({picCode:7118}).then(function(e){r.ecoDataDown=e.data,console.log($(".datalist")),$(".datalist").mCustomScrollbar()}),e.open=function(t){e.chartlist[t].opened=!0},e.changed=function(t){if(!angular.isDate(e.chartlist[t].model)||isNaN(e.chartlist[t].model.getTime()))return void alert("请输入正确的日期格式！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}}]),e.factory("ecoService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,getEcoData:o}}]),e.directive("dashChartEtotal",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{econtent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.econtent&&a.econtent.url&&e.getDetail(a.econtent.url,{queryTime:e.getDateFormat(a.econtent.model,a.econtent.format),picCode:a.econtent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.econtent.model||""==i.init_query_time||(a.econtent.model=new Date(i.init_query_time)),a.econtent.query_time=i.init_query_time,a.econtent.dep_name=i.dep_name;var o={};o.formatYear="yyyy","year"==i.time_scope&&(a.econtent.format="yyyy",o.minMode="year",o.datepickerMode="year"),"month"==i.time_scope&&(a.econtent.format="yyyy-MM",o.minMode="month",o.datepickerMode="month"),a.econtent.dateOptions=o,_.forEach(i.series[1].data,function(e){});var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+i.y_name[0]+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:i.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+i.y_name[0]},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:i.series[0].data},{name:i.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=a==e.data.other.length-1?e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit:e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"\n\n";else t=e.data.name+":"+e.data.value+"\n\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:i.series[1].data}]},c=screen.width;c<1600&&(s.series[1].labelLine={normal:{length:14,length2:8}},s.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},s.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(s)},600),a.onResize1=function(){r&&(r.clear(),r.resize(),r.setOption(s))},angular.element(t).bind("resize",function(){a.onResize1()})}})}}}]),e.directive("dashChartIncrease",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{icontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.icontent&&a.icontent.url&&e.getDetail(a.icontent.url,{queryTime:e.getDateFormat(a.icontent.model,a.icontent.format),picCode:a.icontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.icontent.query_time=i.init_query_time,a.icontent.dep_name=i.dep_name;var o=["rgb(0,204,200)","rgb(232,175,64)","rgb(0,168,228)"],l={color:o,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+e.data.unit+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:i.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return"\n"+e.data.name+"\n"+e.data.value+e.data.unit+"\n"},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:i.series[0].data},{name:i.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+"\n\n"+e.data.other[a].value+e.data.other[a].unit+"\n\n";else t=e.data.name+"\n\n"+e.data.value+e.data.unit+"\n\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:i.series[1].data}]},s=screen.width;s<1600&&(l.series[1].labelLine={normal:{length:10,length2:8}},l.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},l.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(l)},600),a.onResize2=function(){r&&(r.clear(),r.resize(),r.setOption(l))},angular.element(t).bind("resize",function(){a.onResize2()})}})}}}]),e.directive("dashChartInvest",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{vcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.vcontent&&a.vcontent.url&&e.getDetail(a.vcontent.url,{queryTime:e.getDateFormat(a.vcontent.model,a.vcontent.format),picCode:a.vcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.vcontent.query_time=i.init_query_time,a.vcontent.dep_name=i.dep_name;var o={},l={};i.dataItems&&i.dataItems[0]&&(o=i.dataItems[0]),i.dataItems&&i.dataItems[1]&&(l=i.dataItems[1]);var s=["rgb(255,169,34)","rgb(0,152,72)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)"],c=["rgb(0,168,228)","rgb(107,217,95)","rgba(14, 83, 108, 0.5)","rgba(0,204,200,0.5)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisLabel={textStyle:{color:"rgb(0,168,228)"}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:s[2],shadowColor:s[2],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:s[3]}},a.splitArea={show:!0,areaStyle:{color:s[4]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="20%"),e.label={normal:{show:!0,position:"top",textStyle:{color:"#FFF"}}}});var u=screen.width,d="24%",m="10%";u<1600&&(d="36%",m="12%");var h={color:c,title:{text:o.name+"："+o.value+o.unit,subtext:l.name+"："+l.value+l.unit,textStyle:{fontSize:12,color:"rgb(200,254,200)"},subtextStyle:{fontSize:12,color:"rgb(200,254,200)",fontWeight:"border"},itemGap:10,padding:4,backgroundColor:"rgba(0, 120, 215, 0.5)"},grid:{top:d,left:m,right:m,bottom:30},legend:{orient:"vertical",left:"right",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12}},tooltip:{trigger:"axis"},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:s[2],shadowColor:s[2],shadowBlur:4}},axisLabel:{interval:0,textStyle:{fontSize:10,color:"rgb(0,168,228)"}},splitLine:{show:!0,interval:"auto",lineStyle:{color:s[3]}},splitArea:{show:!0,areaStyle:{color:s[4]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(h)},600),a.onResize3=function(){r&&(r.clear(),r.resize(),r.setOption(h))},angular.element(t).bind("resize",function(){a.onResize3()})}})}}}]),e.directive("dashChartCpi",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{ccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.ccontent&&a.ccontent.url&&e.getDetail(a.ccontent.url,{queryTime:e.getDateFormat(a.ccontent.model,a.ccontent.format),picCode:a.ccontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.ccontent.query_time=i.init_query_time,a.ccontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%");var d=["rgb(255,169,34)","rgb(0,152,72)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)"],m={color:d,tooltip:{trigger:"axis"},legend:{orient:"vertical",left:"right",data:i.legend,textStyle:{color:"#d5e2df",fontSize:12}},grid:{top:"24%",left:u,bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[2],shadowColor:d[2],shadowBlur:4}},axisLabel:{interval:0,textStyle:{fontSize:10},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}"},name:i.y_name,min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[2],shadowColor:d[2],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("dashChartConsume",["ecoService","$window",function(e,t){return{restrict:"ACE",scope:{scontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.scontent&&a.scontent.url&&e.getDetail(a.scontent.url,{queryTime:e.getDateFormat(a.scontent.model,a.scontent.format),picCode:a.scontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.scontent.query_time=i.init_query_time,a.scontent.dep_name=i.dep_name;var o={},l={};i.dataItems&&i.dataItems[0]&&(o=i.dataItems[0]),i.dataItems&&i.dataItems[1]&&(l=i.dataItems[1]);var s=["rgb(107,217,95)","rgb(0,168,228)","rgb(14, 83, 108)","rgb(0,204,200)"],c={color:s,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+"<br/>";else t=e.data.name+":"+e.data.value+i.y_name[0]+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},title:{text:o.name+"："+o.value+o.unit,subtext:l.name+"："+l.value+l.unit,left:"right",textStyle:{fontSize:12,color:"rgb(200,254,200)"},subtextStyle:{fontSize:12,color:"rgb(200,254,200)",fontWeight:"border"},itemGap:10,padding:4,backgroundColor:"rgba(0, 120, 215, 0.5)"},series:[{name:i.series[0].name,type:"pie",radius:"50%",center:["50%","50%"],startAngle:-230,data:i.series[0].data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{normal:{label:{show:!0,formatter:function(e){var t="\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=a==e.data.other.length-1?e.data.other[a].name+":"+e.data.other[a].value:e.data.other[a].name+":"+e.data.other[a].value+"\n\n";else{var n=i.y_name[0]?i.y_name[0]:"";t=e.data.name+":"+e.data.value+n+"\n\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%")}return t},textStyle:{color:"#FFF",fontSize:14}}}},labelLine:{show:!0,normal:{length:14,length2:8}}}]},u=screen.width;u<1600&&(c.series[0].labelLine={normal:{length:12,length2:4}},c.series[0].label={},c.series[0].label.normal={},c.series[0].label.normal.textStyle={color:"#FFF",fontSize:10});var d=$(".inner-line").height(),m=$(".header").outerHeight(!0),h=d-m-20-15-2-15;$(".main").css({"max-height":d-m+"px"}),$(".center-top").css({"max-height":h/2+"px"}),$(".center-down").css({"max-height":h/2+"px"});var p=$(".center-top").outerHeight(!0),g=$(".center-down").outerHeight(!0);$(".right-bottom").css({"max-height":g+"px"}),$(".right-top").css({"max-height":p-15+"px"}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(c)},600),a.onResize5=function(){if(r){var e=$(".inner-line").height(),t=$(".header").outerHeight(!0),a=e-t-20-15-2-15;$(".main").css({"max-height":e-t+"px"}),$(".center-top").css({"max-height":a/2+"px"}),$(".center-down").css({"max-height":a/2+"px"});var n=$(".center-top").outerHeight(!0),i=$(".center-down").outerHeight(!0);$(".right-bottom").css({"max-height":i+"px"}),$(".right-top").css({"max-height":n-15+"px"}),r.clear(),r.resize(),r.setOption(c)}},angular.element(t).bind("resize",function(){a.onResize5()})}})}}}])}(),function(){var e=angular.module("app.profile.industry",[]);e.$inject=["$location"],e.controller("industryController",["$scope","industryService","$state","$stateParams","$window",function(e,t,a,n,i){var r=this;$(".profile").css({background:"url(assets/images/bg.png)"}),e.indstlist=[];var o=n.proid;t.getContent({menuId:o}).then(function(t){r.indstcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.indstcontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.indstlist.push(a)})}),t.getindustryData({picCode:2003}).then(function(e){r.industryData=e.data,$(".datalist").mCustomScrollbar()})}]),e.factory("industryService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,getindustryData:o}}]),e.directive("indstChartReg",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{regcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.regcontent&&a.regcontent.url&&e.getDetail(a.regcontent.url,{picCode:a.regcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.regcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:15,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:d[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize1=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize1()})}})}}}]),e.directive("indstChartInvest",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{invstcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.invstcontent&&a.invstcontent.url&&e.getDetail(a.invstcontent.url,{picCode:a.invstcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.invstcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:d[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize2=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize2()})}})}}}]),e.directive("indstChartEco",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{ecocontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.ecocontent&&a.ecocontent.url&&e.getDetail(a.ecocontent.url,{picCode:a.ecocontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.ecocontent.query_time=i.init_query_time,a.ecocontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%",d="80%";s<1600&&(c="32%",u="16%",d="60%");var m=[];_.forEach(i.x_data,function(e,t){var a={};a.name=e,a.name.show=!0;var n=0,r=0;if(1==i.series[0].data.length){var o=_.map(i.series[0].data,"value")[0];n=Number(o[t]),r=Number(o[t]),_.forEach(o[0],function(e,t){Number(o[t])>n&&(n=Number(o[t])),Number(o[t])<r&&(r=Number(o[t]))})}else{var o=_.map(i.series[0].data,"value"),l=[];_.forEach(o,function(e,t){l=_.concat(e,l)}),n=Number(l[0]),r=Number(l[0]),_.forEach(l,function(e){Number(e)>n&&(n=Number(e)),Number(e)<r&&(r=Number(e))})}a.max=n,a.min=.8*r,m.push(a)}),_.forEach(i.series,function(e){e.symbol="diamond",e.symbolSize=0,e.itemStyle={normal:{color:"rgb(236,206,15)"}},e.lineStyle={normal:{color:"rgb(236,206,15)"}},e.data[0].areaStyle={normal:{opacity:.8,color:"rgb(173,168,70)"}}});var h={};h.tooltip={},h.legend={left:"right",data:i.legend,textStyle:{color:"rgb(236,206,15)"},itemWidth:15,itemHeight:6},h.radar={},h.radar.center=["50%","50%"],h.radar.name={show:!0,textStyle:{color:"rgb(0,255,246)",fontSize:14},formatter:function(e){var t=e.length,a="";if(t>4){var n="",i="";if(n=e.substring(0,t-5),n.length>8){var r=n.substring(0,n.length-5),o=n.substring(n.length-5);n=r+"\n"+o}i=e.substring(t-5),a=n+"\n"+i}else a=e;return a}},h.radar.nameGap=8,h.radar.radius=d,h.radar.axisLine={show:!1},h.radar.splitLine={lineStyle:{color:"rgb(01,106,224)"}},h.radar.splitArea={show:!1},h.radar.indicator=m,h.series=i.series,setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(h)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(h))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("indstChartPro",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{procontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.procontent&&a.procontent.url&&e.getDetail(a.procontent.url,{picCode:a.procontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.procontent.dep_name=i.dep_name;var o=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;i.max_and_min&&(l=Math.round(i.max_and_min[0].minValue),s=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:o[5]},a.axisLabel={textStyle:{color:o[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:o[2]}},a.splitArea={show:!0,areaStyle:{color:o[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="45%"),"line"==e.type&&(e.connectNulls=!0),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:o,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{top:"12%",left:d,right:"2%",bottom:100},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:12,color:o[5]},formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!0,interval:0,lineStyle:{color:o[2]}},splitArea:{show:!0,areaStyle:{color:o[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("indstChartElec",["industryService","$window",function(e,t){return{restrict:"ACE",scope:{eleccontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.eleccontent&&a.eleccontent.url&&e.getDetail(a.eleccontent.url,{picCode:a.eleccontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.eleccontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series},h=$(".inner-line").height(),p=$(".header").outerHeight(!0),g=h-p-15-2-15;$(".main").css({"max-height":h-p+"px"}),$(".top-box").css({"max-height":g/2+"px"}),$(".down-box").css({"max-height":g/2+"px"});var f=$(".top-box").outerHeight(!0);$(".down-box").outerHeight(!0);$(".right-table").css({"max-height":f-15+"px"}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){var e=$(".inner-line").height(),t=$(".header").outerHeight(!0),a=e-t-15-2-15;$(".main").css({"max-height":e-t+"px"}),$(".top-box").css({"max-height":a/2+"px"}),$(".down-box").css({"max-height":a/2+"px"});var n=$(".top-box").outerHeight(!0);$(".down-box").outerHeight(!0);$(".right-table").css({"max-height":n-15+"px"}),r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}])}(),function(){var e=angular.module("app.profile.menu",[]);e.$inject=["$location"],e.controller("menuController",["$scope","menuService",function(e,t){$(".profile").css({background:"url(assets/images/bg_profile.png)"}),t.getContent({menuId:8}).then(function(a){var n=a.data;n&&n[0]&&t.getDetail(n[0].url,{picCode:n[0].picCode}).then(function(t){var a=t.data.series;e.allDatas=[],_.forEach(a,function(t){var a={};a.qxname=t.name,a.data=[];var n=t.data;_.forEach(n,function(e){var t={};t.item=[],_.map(a.data,"title").indexOf(e.name)>-1?_.forEach(a.data,function(t,n){t.title==e.name&&a.data[n].item.push(e)}):(t.title=e.name,t.item.push(e),a.data.push(t))}),e.allDatas.push(a)}),e.qxdata=e.allDatas[0],console.log(e.allDatas)})})}]),e.factory("menuService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/showPics",{params:a})}function n(a,n){return e.get(t+a,{params:n})}return{getContent:a,getDetail:n}}]),e.directive("wiservChartMap",["menuService","$window",function(e,t){return{restrict:"ACE",scope:{content:"=",all:"="},template:"<div id='bzmap' style='width:100%;height:100%'></div>",link:function(e,a,n){var i={};e.$applyAsync(function(){i=echarts.init(document.getElementById("bzmap")),setTimeout(function(){i.clear(),i.resize(),i.setOption({legend:{orient:"vertical",left:"left"},series:[{name:"巴中市经济概况",type:"map",map:"bz",left:10,top:10,right:10,bottom:10,selectedMode:"single",label:{normal:{show:!0,textStyle:{color:"#FFF",fontSize:16}},emphasis:{show:!0}},itemStyle:{normal:{areaColor:"#FFF",color:new echarts.graphic.RadialGradient(0,0,8,[{offset:0,color:"rgb(195,211,234)"},{offset:1,color:"rgb(195,211,234)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderType:"solid"}},markPoint:{symbol:"pin",symbolSize:50},data:[{name:"通江县",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(18,126,215)"},{offset:1,color:"rgb(17,80,201)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"南江县",value:223,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(18,126,215)"},{offset:1,color:"rgb(17,80,201)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"巴州区",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,162,226)"},{offset:1,color:"rgb(18,132,217)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"平昌县",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,164,227)"},{offset:1,color:"rgb(18,112,210)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}},{name:"恩阳区",value:123,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(19,175,230)"},{offset:1,color:"rgb(19,164,227)"}],(!1)),borderColor:"rgba(42,180,238,1)",borderWidth:3,borderType:"solid"}}}]}]}),$("#bzmap").css({"background-image":"url(assets/images/map_bg.png)"})},500),i.on("mapselectchanged",function(t){var a=t.name;_.forEach(e.all,function(t){a&&a==t.qxname&&(e.content=t,e.$apply(function(){e.content=t}))})})}),e.onResize=function(){i&&i.resize()},angular.element(t).bind("resize",function(){e.onResize()}),angular.element(t).bind("resize",function(){e.onResize()})}}}])}(),function(){var e=angular.module("app.profile.service",[]);e.$inject=["$location"],e.controller("serviceController",["$scope","serviceService","$state","$stateParams","$window",function(e,t,a,n,i){var r=this;$(".profile").css({background:"url(assets/images/bg.png)"}),e.servicelist=[];var o=n.proid;t.getContent({menuId:o}).then(function(t){r.servicecontent=_.sortBy(t.data,["picCode"]),_.forEach(r.servicecontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.servicelist.push(a)})})}]),e.factory("serviceService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,getserviceData:o}}]),e.directive("serviceChartConsume",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{consumecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.consumecontent&&a.consumecontent.url&&e.getDetail(a.consumecontent.url,{picCode:a.consumecontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.consumecontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="10%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,
nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("serviceChartBank",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{bankcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.bankcontent&&a.bankcontent.url&&e.getDetail(a.bankcontent.url,{picCode:a.bankcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.bankcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]},formatter:function(e){var t=e.substring(e.indexOf("-")+1);return Number(t)+"月"}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("serviceChartHouse",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{housecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.housecontent&&a.housecontent.url&&e.getDetail(a.housecontent.url,{picCode:a.housecontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.housecontent.dep_name=i.dep_name;var o=["rgb(0,255,161)","rgb(0,168,228)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgba(0, 255, 161, 0.9)","rgb(3,204,215)"],l=0,s=0;i.max_and_min&&(l=Math.round(i.max_and_min[0].minValue),s=Math.round(i.max_and_min[0].maxValue)),i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.nameTextStyle={color:o[5]},a.axisLabel={textStyle:{color:o[5]}},a.axisTick={},a.axisTick.inside=!0,a.axisLine={lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},a.splitLine={show:!0,interval:"auto",lineStyle:{color:o[2]}},a.splitArea={show:!0,areaStyle:{color:o[3]}},i.max_and_min){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,i.yAxis.push(a)}),_.forEach(i.series,function(e){"bar"==e.type&&(e.barMaxWidth="40%"),e.label={normal:{show:!0,position:"top"}}});var c=screen.width,u="24%",d="10%";c<1600&&(u="36%",d="12%");var m={color:o,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"center",data:i.legend,textStyle:{color:"#fbfbfb",fontSize:12},itemWidth:15,itemHeight:6},grid:{left:d,right:d,bottom:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:o[1],shadowColor:o[1],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:8,color:o[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:o[2]}},splitArea:{show:!0,areaStyle:{color:o[3]}},data:i.x_data}],yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize2=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize2()})}})}}}]),e.directive("serviceChartEnt",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{entcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.entcontent&&a.entcontent.url&&e.getDetail(a.entcontent.url,{picCode:a.entcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.entcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%",d="12%";s<1600&&(c="32%",u="16%",d="20%");var m=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisTick={},a.axisTick.inside=!0,i.max_and_min&&i.max_and_min[t]){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,a.axisLine={onZero:!1,lineStyle:{color:m[3],shadowColor:m[3],shadowBlur:4}},a.axisLabel={},a.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},a.axisLabel.textStyle={color:m[5]},a.nameTextStyle={color:m[5]},a.splitLine={show:!0,interval:"auto",lineStyle:{color:m[3]}},a.splitArea={show:!0,areaStyle:{color:m[4]}},i.yAxis.push(a)}),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";(t+1)%2!=0&&(a="bottom"),e.label={normal:{show:!0,position:a}}});var h={color:m,tooltip:{trigger:"axis"},legend:{left:"center",top:2,data:i.legend,textStyle:{fontSize:12,color:m},itemWidth:15,itemHeight:6},grid:{top:"14%",left:u,right:"4%",bottom:160},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:i.x_data,axisLine:{lineStyle:{color:m[3],shadowColor:m[3],shadowBlur:4}},axisLabel:{interval:0,margin:4,textStyle:{fontSize:10,color:m[5]},formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!0,interval:0,lineStyle:{color:m[3]}},splitArea:{show:!0,areaStyle:{color:m[4]}}},yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(h)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(h))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("serviceChartGoods",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{goodscontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.goodscontent&&a.goodscontent.url&&e.getDetail(a.goodscontent.url,{picCode:a.goodscontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.goodscontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("serviceChartTraffic",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{trafficontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.trafficontent&&a.trafficontent.url&&e.getDetail(a.trafficontent.url,{picCode:a.trafficontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.trafficontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="16%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}])}(),function(){var e=angular.module("app.profile.travel",[]);e.$inject=["$location"],e.controller("travelController",["$scope","travelService","$state","$stateParams","$window",function(e,t,a,n,i){var r=this;$(".profile").css({background:"url(assets/images/bg.png)"}),e.travellist=[];var o=n.proid;t.getContent({menuId:o}).then(function(t){r.travelcontent=_.sortBy(t.data,["picCode"]),_.forEach(r.travelcontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.travellist.push(a)})}),t.gettravelData({picCode:5003}).then(function(e){r.travelData=e.data,$(".datalist").mCustomScrollbar()})}]),e.factory("travelService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/menu",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a){return e.get(t+"/main/showPics",{params:a})}function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(a){return e.get(t+"/identity/table",{params:a})}return{getMenus:a,getDetail:n,getContent:i,getDateFormat:r,gettravelData:o}}]),e.directive("travelChartHouse",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{housecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.housecontent&&a.housecontent.url&&e.getDetail(a.housecontent.url,{picCode:a.housecontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.housecontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="10%");var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisTick={},a.axisTick.inside=!0,i.max_and_min&&i.max_and_min[t]){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,a.axisLine={onZero:!1,lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},a.axisLabel={},a.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},a.axisLabel.textStyle={color:d[5]},a.nameTextStyle={color:d[5]},a.splitLine={show:!0,interval:"auto",lineStyle:{color:d[3]}},a.splitArea={show:!0,areaStyle:{color:d[4]}},i.yAxis.push(a)}),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";(t+1)%2!=0&&(a="bottom"),e.label={normal:{show:!0,position:a}}});var m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:u,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("travelChartSite",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{sitecontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.sitecontent&&a.sitecontent.url&&e.getDetail(a.sitecontent.url,{queryTime:e.getDateFormat(a.sitecontent.model,a.sitecontent.format),picCode:a.sitecontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.sitecontent.model||""==i.init_query_time||(a.sitecontent.model=new Date(i.init_query_time)),a.sitecontent.query_time=i.init_query_time,a.sitecontent.dep_name=i.dep_name;var o={};o.formatYear="yyyy","year"==i.time_scope&&(a.econtent.format="yyyy",o.minMode="year",o.datepickerMode="year"),"month"==i.time_scope&&(a.sitecontent.format="yyyy-MM",o.minMode="month",o.datepickerMode="month"),a.sitecontent.dateOptions=o,_.forEach(i.series[1].data,function(e){});var l=["rgb(0,204,200)","rgb(240,119,129)","rgb(0,168,228)"],s={color:l,tooltip:{trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+i.y_name[0]+"<br/>",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t}},series:[{name:i.series[0].name,type:"pie",selectedMode:"single",radius:[0,"25%"],label:{normal:{position:"center",formatter:function(e){return e.data.name+"\n"+e.data.value+i.y_name[0]},textStyle:{color:"#FFF",fontSize:14}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"rgba(255,255,255,0)"}},data:i.series[0].data},{name:i.series[1].name,type:"pie",label:{normal:{formatter:function(e){var t="\n"+e.data.name+"\n\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=a==e.data.other.length-1?e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit:e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"\n\n";else t=e.data.name+":"+e.data.value+"\n\n",i.auto_count&&"percent"==i.auto_count&&(t+="占比："+e.percent+"%");return t},textStyle:{color:"#FFF",fontSize:14}}},radius:["25%","50%"],data:i.series[1].data}]},c=screen.width;c<1600&&(s.series[1].startAngle=130,s.series[1].labelLine={normal:{length:14,length2:8}},s.series[0].label.normal.textStyle={color:"#FFF",fontSize:10},s.series[1].label.normal.textStyle={color:"#FFF",fontSize:10}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(s)},600),a.onResize1=function(){r&&(r.clear(),r.resize(),r.setOption(s))},angular.element(t).bind("resize",function(){a.onResize1()})}})}}}]),e.directive("travelChartResta",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{restacontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.restacontent&&a.restacontent.url&&e.getDetail(a.restacontent.url,{picCode:a.restacontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.restacontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="10%");var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"];i.yAxis=[],_.forEach(i.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisTick={},a.axisTick.inside=!0,i.max_and_min&&i.max_and_min[t]){var n=Number(i.max_and_min[t].minValue),r=Number(i.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,r=1+r,a.min=Math.round(n),a.max=Math.round(r)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,a.axisLine={onZero:!1,lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},a.axisLabel={},a.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},a.axisLabel.textStyle={color:d[5]},a.nameTextStyle={color:d[5]},a.splitLine={show:!0,interval:"auto",lineStyle:{color:d[3]}},a.splitArea={show:!0,areaStyle:{color:d[4]}},i.yAxis.push(a)}),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";(t+1)%2!=0&&(a="bottom"),e.label={normal:{show:!0,position:a}}});var m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:u,bottom:30},xAxis:{type:"category",axisTick:{alignWithLabel:!1},data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:i.yAxis,series:i.series};setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}]),e.directive("travelChartTour",["agriService","$window",function(e,t){return{restrict:"ACE",scope:{tourcontent:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){var r=null;a.tourcontent&&a.tourcontent.url&&e.getDetail(a.tourcontent.url,{picCode:a.tourcontent.picCode}).then(function(e){var i=e.data;if(i&&i.series){a.tourcontent.dep_name=i.dep_name;var o=0,l=0;i.max_and_min&&(o=Math.round(i.max_and_min[0].minValue),l=Math.round(i.max_and_min[0].maxValue));var s=screen.width,c="24%",u="10%";s<1600&&(c="32%",u="10%"),_.forEach(i.series,function(e,t){e.symbol="rect",e.symbolSize=4,e.lineStyle={normal:{width:1}};var a="top";(t+1)%2!=0&&(a="bottom"),e.label={normal:{show:!0,position:a}}});var d=["rgb(0,255,161)","rgb(245,225,67)","rgb(252,128,20)","rgba(0, 120, 215, 0.6)","rgba(0, 120, 215, 0.06)","rgb(3,204,215)"],m={color:d,tooltip:{trigger:"axis"},legend:{left:"center",top:10,data:i.legend,textStyle:{fontSize:12,color:d},itemWidth:15,itemHeight:6},grid:{left:u,right:"3.5%",bottom:30},xAxis:{type:"category",boundaryGap:!1,data:i.x_data,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},axisLabel:{interval:0,margin:14,textStyle:{fontSize:10,color:d[5]}},splitLine:{show:!0,interval:0,lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:d[5]}},name:i.y_name,nameTextStyle:{color:d[5]},min:o,max:l,splitBumber:5,interval:(l-o)/5,axisLine:{lineStyle:{color:d[3],shadowColor:d[3],shadowBlur:4}},splitLine:{show:!0,interval:"auto",lineStyle:{color:d[3]}},splitArea:{show:!0,areaStyle:{color:d[4]}}},series:i.series},h=$(".inner-line").height(),p=$(".header").outerHeight(!0),g=h-p-15-2-15;$(".main").css({"max-height":h-p+"px"}),$(".travel-main .left-box").css({"max-height":g+"px"}),$(".travel-main .right-box").css({"max-height":g+"px"}),setTimeout(function(){r=echarts.init(n.find("div")[0]),r.clear(),r.resize(),r.setOption(m)},600),a.onResize4=function(){var e=$(".inner-line").height(),t=$(".header").outerHeight(!0),a=e-t-15-2-15;$(".main").css({"max-height":e-t+"px"}),$(".travel-main .left-box").css({"max-height":a+"px"}),$(".travel-main .right-box").css({"max-height":a+"px"}),r&&(r.clear(),r.resize(),r.setOption(m))},angular.element(t).bind("resize",function(){a.onResize4()})}})}}}])}(),function(){var e=angular.module("app.main.module.content.detail",["ui.bootstrap","cgBusy"]);e.controller("detailController",["$scope","detailService","$stateParams","uibDateParser",function(e,t,a,n){var i=this;e.popups=[],e.quarterOptions=[{id:3,name:"第一季度"},{id:6,name:"第二季度"},{id:9,name:"第三季度"},{id:12,name:"第四季度"}],e.promiseMain=t.getContent({menuId:a.pid}).then(function(t){i.dcontent=_.sortBy(t.data,["picCode"]),_.forEach(i.dcontent,function(t){var a={};a.opened=!1,a.url=t.url,a.picCode=t.picCode,e.popups.push(a)})}),e.open=function(t){e.popups[t].opened=!0},e.changed=function(t){if(angular.isDate(e.popups[t].model)&&!isNaN(e.popups[t].model.getTime()))return"quarter"!=e.popups[t].time_scope||e.popups[t].quarter?void 0:void alert("请选择季度！")},e.altInputFormats=["M!/d!/yyyy"],Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}}]),e.factory("detailService",["$http","URL",function(e,t){function a(a){return e.get(t+"/main/showPics",{params:a})}function n(a,n){return e.get(t+a,{params:n})}function i(a,n){return e.get(t+a,{params:n})}return{getContent:a,getDetail:n,getTableData:i}}]),e.directive("wiservChart",["detailService","$window",function(e,t){return{restrict:"ACE",scope:{content:"="},template:"<div style='width:100%;height:100%'></div>",link:function(a,n,i){function r(e,t){var a=angular.copy(e);return angular.isDate(a)&&!isNaN(a.getTime())?a.Format(t):""}function o(){var t=angular.copy(a.content.model),i=angular.copy(a.content.format);a.content.model&&"quarter"==a.content.time_scope&&(t.setMonth(a.content.quarter-1),i="yyyy-MM"),a.content.promise=e.getDetail(a.content.url,{queryTime:r(t,i),picCode:a.content.picCode}).then(function(o){var c=o.data;if(c&&c.series&&c.series[0]){if(!a.content.model&&""!=c.init_query_time&&(a.content.model=new Date(c.init_query_time),!a.content.quarter)){var u=c.init_query_time.substring(c.init_query_time.indexOf("-")+1);a.content.quarter=Number(u)}a.content.dep_name=c.dep_name,a.content.time_scope=c.time_scope;var d={};d.formatYear="yyyy","year"==c.time_scope&&(a.content.format="yyyy",d.minMode="year",d.datepickerMode="year"),"month"==c.time_scope&&(a.content.format="yyyy-MM",d.minMode="month",d.datepickerMode="month"),"quarter"==c.time_scope&&(a.content.format="yyyy",d.minMode="year",d.datepickerMode="year"),a.content.dateOptions=d,c.yAxis=[],_.forEach(c.y_name,function(e,t){var a={};if(a.type="value",a.name=e,a.axisTick={},a.axisTick.inside=!0,c.max_and_min&&c.max_and_min[t]){var n=Number(c.max_and_min[t].minValue),i=Number(c.max_and_min[t].maxValue);n>=0&&n<1?n=0:n-=1,i=1+i,a.min=Math.round(n),a.max=Math.round(i)}a.splitBumber=5,a.interval=(a.max-a.min)/a.splitBumber,a.axisLine={onZero:!1},a.axisLabel={},a.axisLabel.formatter=function(e){return(e+"").indexOf(".")!=-1?e.toFixed(1):e},c.yAxis.push(a)});var m=["rgb(0,112,192)","rgb(72,200,126)","rgb(228,92,93)","rgb(71,190,121)"],h=["#FFF","rgb(90,177,239)","rgb(46,199,201)","rgb(182,162,222)","rgb(228,92,93)"],p=["rgb(90,177,239)","rgb(46,199,201)","rgb(182,162,222)","rgb(228,92,93)"];if("pie"==c.series[0].type)s.series=c.series,1==s.series.length&&(h=p,s.series[0].radius=[0,"50%"]),s.color=h,c.series.length>1&&(s.series[0].radius=[0,"26%"],s.series[1].label={},s.series[1].label.normal={},s.series[1].label.normal.formatter=function(e){var t="\n\n"+e.data.name+"\n";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"\n";else t=e.data.name+":"+e.data.value+e.data.unit+"\n",c.auto_count&&"percent"==c.auto_count&&(t+="占比："+e.percent+"%");return t},s.series[1].radius=["26%","48%"]),s.tooltip={trigger:"item",formatter:function(e){var t=e.data.name+"<br/>";if(e.data.other&&e.data.other.length>1)for(var a=0;a<e.data.other.length;a++)t+=e.data.other[a].name+":"+e.data.other[a].value+e.data.other[a].unit+"<br/>";else t=e.data.name+":"+e.data.value+c.y_name[0]+"<br/>",c.auto_count&&"percent"==c.auto_count&&(t+="占比："+e.percent+"%");return t}},s.title={text:c.title,left:"center"},s.series[0].label={},s.series[0].label.normal={},s.series[0].label.normal.position="center",s.series[0].label.normal.textStyle={color:"#333"},1==s.series.length&&(s.series[0].label.normal.position="outside"),s.series[0].label.normal.formatter="{b}\n {c}"+c.y_name[0];else if("radar"==c.series[0].type){var g=[];_.forEach(c.x_data,function(e,t){var a={};a.name=e;var n=0,i=0;if(1==c.series[0].data.length){var r=_.map(c.series[0].data,"value")[0];n=Number(r[t]),i=Number(r[t]),_.forEach(r[0],function(e,t){Number(r[t])>n&&(n=Number(r[t])),Number(r[t])<i&&(i=Number(r[t]))})}else{var r=_.map(c.series[0].data,"value"),o=[];_.forEach(r,function(e,t){o=_.concat(e,o)}),n=Number(o[0]),i=Number(o[0]),_.forEach(o,function(e){Number(e)>n&&(n=Number(e)),Number(e)<i&&(i=Number(e))})}a.max=n,a.min=.8*i,g.push(a)}),s.color=m,s.tooltip={},s.legend={top:"bottom",bottom:20,data:c.legend,textStyle:{fontSize:14,fontWeight:"bolder"}},s.title={text:c.title,left:"center"},s.radar={},s.radar.name={textStyle:{color:"#333",fontSize:14}},s.radar.nameGap=8,s.radar.radius="60%",s.radar.indicator=g,"2321"==a.content.picCode&&(s.radar.startAngle=162),s.series=c.series}else{var f="",v="top",y={},b=70;"1"==c.need_group&&(f="group",v="inside",m=p),c.series[0].data.length>10&&(y={interval:0,formatter:function(e){return e.indexOf("月")>-1?e:e.split("").join("\n")}}),y.textStyle={fontWeight:"bolder"},_.forEach(c.series,function(e,t){if(e.label={normal:{show:!0,position:v,textStyle:{fontSize:12}}},"4211"!=a.content.picCode&&"4221"!=a.content.picCode||(e.label.normal={show:!1}),"bar"==e.type&&(e.data.length<3?e.barMaxWidth="20%":(e.barMaxWidth="40%",e.data.length>10?e.label={normal:{show:!1}}:e.label={normal:{show:!0,position:v,textStyle:{fontSize:12,fontWeight:"bolder"}}})),"line"==e.type){var n=_.map(e.data,"name");n&&n.length>1&&1==_.uniq(n).length&&(e.symbol="roundCircle",e.symbolSize=1,_.forEach(e.data,function(e,t){0==t?e.label={normal:{show:!0,textStyle:{fontWeight:"bolder"}}}:e.label={normal:{show:!1}}}))}e.data.length>5&&_.forEach(e.data,function(t){t.name&&t.name.length>5&&e.data.length>12&&(b="2322"==a.content.picCode?100:190)}),e.connectNulls=!0,e.stack=f});var x=screen.width,w="10%",S="10%";x<1600&&(w="15%",S="15%"),s={color:m,title:{text:c.title,left:"center",top:-4},tooltip:{trigger:"axis"},legend:{top:"bottom",bottom:20,data:c.legend,textStyle:{fontSize:14,fontWeight:"bolder"}},grid:{bottom:b,top:"15%",left:w,right:S},xAxis:[{type:"category",axisTick:{show:!1},axisLabel:y,data:c.x_data}],yAxis:c.yAxis,series:c.series}}if("same"==c.table_type){a.content.columnNames=c.x_data;var C=[];"radar"==c.series[0].type?_.forEach(c.series[0].data,function(e,t){var a={};a.rowName=e.name;var n=[];_.forEach(e.value,function(e){var t={};t.value=e,n.push(t)}),a.rowValue=n,C.push(a)}):_.forEach(c.legend,function(e,t){var a={};a.rowName=e,a.rowValue=c.series[t].data,C.push(a)}),a.content.rowData=C}else if("reverse"==c.table_type){a.content.columnNames=c.legend;var C=[];_.forEach(c.x_data,function(e,t){var a={};a.rowName=e;var n=[];"radar"==c.series[0].type?_.forEach(c.series[0].data,function(e,a){var i={};i.name=e.name,i.value=e.value[t],n.push(i)}):_.forEach(c.series,function(e,a){var i={};i.name=e.name,i.value=c.series[a].data[t].value,n.push(i)}),a.rowValue=n,C.push(a)}),a.content.rowData=C}else"form"==c.table_type?(a.content.formTable=!0,e.getTableData(c.table_url,{picCode:a.content.picCode,queryTime:r(t,i)}).then(function(e){a.content.rowData=e.data})):e.getTableData(c.table_url,{picCode:a.content.picCode,queryTime:r(t,i)}).then(function(e){console.log(_.map(e.data.rowData[0].rowValue,"name")),a.content.columnNames=_.map(e.data.rowData[0].rowValue,"name"),a.content.rowData=e.data.rowData});if("4112"==a.content.picCode){var z=c.series[0].data,$=c.series[1].data;n.find("div")[0].innerHTML='<div class="item-wrap"><div class="chart-item"><div class="item"><div class="pic pic-home"><i class="fa fa-home"></i></div></div><div class="item"><div class="pic pic-home"><i class="fa fa-rmb"></i></div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+z[0].name+z[0].value+z[0].unit+'</div></div><div class="item"><div class="content-item">'+c.series[0].name+"："+$[0].value+$[0].unit+'</div></div></div><div class="chart-item"><div class="item"><div class="content-item">'+z[1].name+z[1].value+z[1].unit+'</div></div><div class="item"><div class="content-item">'+c.series[1].name+"："+$[1].value+$[1].unit+"</div></div></div><div>"}else setTimeout(function(){l=echarts.init(n.find("div")[0]),l.clear(),l.resize(),l.setOption(s)},600)}})}a.$watch("content.model",function(e,t){e!==t&&e&&t&&o()}),a.$watch("content.quarter",function(e,t){e!==t&&e&&t&&o()});var l=null,s={};o(),a.onResize=function(){l&&l.resize()},angular.element(t).bind("resize",function(){a.onResize()})}}}])}();