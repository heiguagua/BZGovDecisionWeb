<!DOCTYPE html>
<html lang="en" class="front-page" ng-app='app' ng-strict-di ng-cloak>
  <head>
    <meta charset="utf-8"/>
    <!-- <base href="/"> -->
    <title>巴中市政务决策系统</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <link href='libraries/bootstrap/css/bootstrap.min.css' rel='stylesheet'/>
    <link href='libraries/font-awesome/css/font-awesome.min.css' rel='stylesheet'/>
    <link href='libraries/angular-busy/angular-busy.min.css' rel='stylesheet'/>
    <link rel="stylesheet" href="libraries/angular-scrollbar/jquery.mCustomScrollbar.css">
    <link href='libraries/metisMenu/metisMenu.min.css' rel='stylesheet'/>
    <link rel="stylesheet" href="libraries/slick/slick.css">
    <link rel="stylesheet" href="libraries/slick/slick-theme.css">
    <link rel="stylesheet" href="libraries/angular-carousel/angular-carousel.css">
    <link rel="stylesheet" href="libraries/bootstrap-select/bootstrap-select.min.css">
    <link href='bundles/styles.css?ver=1.1.R_TO_1.1.P0_6' rel='stylesheet'/>
    <script src='libraries/jquery/jquery.min.js'></script>
    <script>
      $.ajaxSetup({
        global: true,
        crossDomain: true,
        xhrFields: {
          withCredentials: true
        },
        beforeSend: function (XMLHttpRequest) {
                     //HttpUtility.UrlEncode
                     XMLHttpRequest.withCredentials = true;
                     XMLHttpRequest.setRequestHeader('isAjax', 'true');
                 },
      });
      var os = function() {
        var ua = navigator.userAgent,
          isWindowsPhone = /(?:Windows Phone)/.test(ua),
          isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone,
          isAndroid = /(?:Android)/.test(ua),
          isFireFox = /(?:Firefox)/.test(ua),
          isChrome = /(?:Chrome|CriOS)/.test(ua),
          isTablet = /(?:iPad|PlayBook)/.test(ua) || (isAndroid && !/(?:Mobile)/.test(ua)) || (isFireFox && /(?:Tablet)/.test(ua)),
          isPhone = /(?:iPhone)/.test(ua) && !isTablet,
          isPc = !isPhone && !isAndroid && !isSymbian;
        return {
          isTablet: isTablet,
          isPhone: isPhone,
          isAndroid: isAndroid,
          isPc: isPc
        };
      }();

      var $doc = $(document);
      $doc.ajaxError(function(event, xhr, options, thrownError) {
        var errors = JSON.parse(xhr.responseText);
        if (errors && errors.path && errors.path.indexOf('/auth') > -1) {
          if(os.isAndroid || os.isPhone) {
            window.location = './#/home';
          }
          else {
            window.location = './#/profile';
          }

        };
        if (xhr.status == 511) {
          window.location = errors.location;
        }
      });

      $.ajax({
        async:false,
        //url:location.protocol + '//' + location.host + "/govDecisionServer/auth"
        url:'http://172.16.0.73:8083/auth'
      });
    </script>
    <script src="libraries/bootstrap-select/bootstrap-select.min.js"></script>
    <script src='libraries/angular/angular.min.js'></script>
    <script src="libraries/angular/angular-animate.js"></script>
    <script src='libraries/angular/angular-cookies.min.js'></script>
    <script src='libraries/bootstrap/js/bootstrap.min.js'></script>
    <script src='libraries/angular-ui/ui-bootstrap-tpls.min.js'></script>
    <script src='libraries/angular-busy/angular-busy.min.js'></script>
    <script src='libraries/angular/i18n/angular-locale_zh-cn.js'></script>
    <script src='libraries/echarts/echarts.min.js'></script>
    <script src='libraries/echarts/echarts-liquidfill.min.js'></script>
    <script src='libraries/map/china.js' defer async='true'></script>
    <script src='libraries/map/bazhong.js' defer async='true'></script>
    <script src='libraries/map/bz_single.js' defer async='true'></script>
    <script src='libraries/map/chuan_east_north.js' defer async='true'></script>
    <script src='libraries/angular-ui-router/angular-ui-router.min.js'></script>
    <script src="libraries/angular-scrollbar/jquery.mCustomScrollbar.min.js"></script>
    <script src='libraries/metisMenu/metisMenu.min.js'></script>
    <script src="libraries/slick/slick.min.js"></script>
    <script src="libraries/angular-slick/slick.min.js"></script>
    <script src="libraries/angular-mobile/angular-touch.js"></script>
    <script src="libraries/angular-carousel/angular-carousel.min.js"></script>

    <script src="libraries/angular-bootstrap-select/angular-bootstrap-select.js"></script>
    <script src='libraries/lodash/lodash.min.js'></script>
    <script src="libraries/md5.js"></script>

  </head>

  <body class='page-header-fixed'>
    <div id='ui-view-index' ui-view></div>
    <!-- Libraries -->
    <!-- <script src="libraries/pdf/pdf.js"></script> -->

    <!-- Customs -->
    <script src='bundles/scripts.js?ver=1.1.R_TO_1.1.P0_6'></script>
  </body>
</html>
